<!DOCTYPE html>

<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>锐哥的个人空间</title>

    
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="锐哥">

    <meta name="color-scheme" content="light dark">

    
    
<link rel="stylesheet" href="/styles/index.css">

    
    <link rel="shortcut icon" href="/imgs/logo.png">

    
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.8.0/styles/base16/solarized-light.css">
    

    
<meta name="generator" content="Hexo 7.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body id="delicate-app">
    <main>
        <div class="container">
            <section class="page-top-badge flex-between w100">
                <div>
                    <a href="/">
                        <span title="github"><i class="fa fa-home" aria-hidden="true"></i></span>
                    </a>
                </div>
                <!-- <div>
                    
                </div> -->
            </section>
            <section class="index-title">
    <h2>锐哥的个人空间</h2>
    <div class="description"></h3>
</section>
<header>
    <nav>
        
        
            
            <a href="/archives/">archive</a>
        
            
             | <a href="/tags/">tags</a>
        
            
             | <a href="/categories/">categories</a>
        
            
             | <a href="/about/">关于我</a>
        
    </nav>
</header>
<div class="head-img">
    <img src="/imgs/beach.jpg">
</div>
<article class="index-article">
    <div class="article-list">
        
            
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8818%EF%BC%89%E7%B1%BB%E6%A8%A1%E6%9D%BF/">
                            C++学习笔记（18）类模板
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/08
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        
                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8818%EF%BC%89%E7%B1%BB%E6%A8%A1%E6%9D%BF/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8817%EF%BC%89%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/">
                            C++学习笔记（17）函数模板
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/08
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        
                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8817%EF%BC%89%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8816%EF%BC%89%E7%B1%BB%E5%A4%9A%E6%80%81/">
                            C++学习笔记（16）类多态
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/08
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        
                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8816%EF%BC%89%E7%B1%BB%E5%A4%9A%E6%80%81/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8815%EF%BC%89%E7%B1%BB%E7%BB%A7%E6%89%BF/">
                            C++学习笔记（15）类继承
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/08
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        <h2 id="继承的基本概念">继承的基本概念</h2>
<p>继承可以理解为一个类从另一个类获取成员变量和成员函数的过程。<br>
语法：<br>
class 派生类名:［继承方式］基类名<br>
{<br>
派生类新增加的成员<br>
};<br>
被继承的类称为基类或父类，继承的类称为派生类或子类。<br>
继承和派生是一个概念，只是站的角度不同。<br>
派生类除了拥有基类的成员，还可以定义新的成员，以增强其功能。<br>
使用继承的场景：</p>
<ol>
<li>如果新创建的类与现有的类相似，只是多出若干成员变量或成员函数时，可以使用继承。</li>
<li>当需要创建多个类时，如果它们拥有很多相似的成员变量或成员函数，可以将这些类共同的成员提取出来，定义为基类，然后从基类继承。<br>
示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></li>
</ol>
<p>class CAllComers          // 海选报名者类<br>
{<br>
public:<br>
string    m_name;    // 姓名<br>
string    m_tel;         // 联系电话</p>
<pre><code>// 构造函数。
CAllComers() { m_name = "某女"; m_tel = "不详"; }
// 报名时需要唱一首歌。
void sing() { cout &lt;&lt; "我是一只小小鸟。\n"; }
// 设置姓名。
void setname(const string&amp; name) { m_name = name; }
// 设置电话号码。
void settel(const string&amp; tel) { m_tel = tel; }
</code></pre>
<p>};</p>
<p>class CGirl :public CAllComers        // 超女类<br>
{<br>
public:<br>
int m_bh;          // 编号。<br>
CGirl() { m_bh = 8;  }<br>
void show() { cout &lt;&lt; “编号：” &lt;&lt; m_bh &lt;&lt; “，姓名：” &lt;&lt; m_name &lt;&lt; “，联系电话：” &lt;&lt; m_tel &lt;&lt; endl; }<br>
};</p>
<p>int main()<br>
{<br>
CGirl g;<br>
g.setname(“西施”);<br>
g.show();<br>
}</p>
<h2 id="继承方式">继承方式</h2>
<p>类成员的访问权限由高到低依次为：public --&gt; protected --&gt; private，public成员在类外可以访问，private成员只能在类的成员函数中访问。<br>
如果不考虑继承关系，protected成员和private成员一样，类外不能访问。但是，当存在继承关系时，protected和private就不一样了。基类中的protected成员可以在派生类中访问，而基类中的 private成员不能在派生类中访问。<br>
继承方式有三种：public（公有的）、protected（受保护的）和private（私有的）。它是可选的，如果不写，那么默认为private。不同的继承方式决定了在派生类中成员函数中访问基类成员的权限。<br>
1）基类成员在派生类中的访问权限不得高于继承方式中指定的权限。例如，当继承方式为protected时，那么基类成员在派生类中的访问权限最高也为protected，高于protected的会降级为protected，但低于protected不会升级。再如，当继承方式为public时，那么基类成员在派生类中的访问权限将保持不变。<br>
也就是说，继承方式中的public、protected、private是用来指明基类成员在派生类中的最高访问权限的。<br>
2) 不管继承方式如何，基类中的private成员在派生类中始终不能使用（不能在派生类的成员函数中访问或调用）。<br>
3) 如果希望基类的成员能够被派生类继承并且毫无障碍地使用，那么这些成员只能声明为public 或protected；只有那些不希望在派生类中使用的成员才声明为private。<br>
4) 如果希望基类的成员既不向外暴露（不能通过对象访问），还能在派生类中使用，那么只能声明为 protected。<br>
由于private和protected继承方式会改变基类成员在派生类中的访问权限，导致继承关系复杂，所以，在实际开发中，一般使用public。<br>
在派生类中，可以通过基类的公有成员函数间接访问基类的私有成员。<br>
使用 using 关键字可以改变基类成员在派生类中的访问权限。<br>
注意：using只能改变基类中public和protected成员的访问权限，不能改变private成员的访问权限，因为基类中的private成员在派生类中是不可见的，根本不能使用。<br>
示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class A  {        // 基类<br>
public:<br>
int m_a=10;<br>
protected:<br>
int m_b=20;<br>
private:<br>
int m_c = 30;<br>
};</p>
<p>class B :public A        // 派生类<br>
{<br>
public:<br>
using A::m_b;         // 把m_b的权限修改为公有的。<br>
private:<br>
using A::m_a;         // 把m_a的权限修改为私有的。<br>
};</p>
<p>int main()<br>
{<br>
B b;<br>
// b.m_a = 11;<br>
b.m_b = 21;<br>
//b.m_c = 21;<br>
}</p>
<h2 id="继承的对象模型">继承的对象模型</h2>
<p>1）创建派生类对象时，先调用基类的构造函数，再调用派生类的构造函数。<br>
2）销毁派生类对象时，先调用派生类的析构函数，再调用基类的析构函数。如果手工调用派生类的析构函数，也会调用基类的析构函数。<br>
3）创建派生类对象时只会申请一次内存，派生类对象包含了基类对象的内存空间，this指针相同的。<br>
4）创建派生类对象时，先初始化基类对象，再初始化派生类对象。<br>
5）在VS中，用cl.exe可以查看类的内存模型。<br>
6）对派生类对象用sizeof得到的是基类所有成员（包括私有成员）+派生类对象所有成员的大小。<br>
7）在C++中，不同继承方式的访问权限只是语法上的处理。<br>
8）对派生类对象用memset()会清空基类私有成员。<br>
9）用指针可以访问到基类中的私有成员（内存对齐）。</p>
<p>查看对象内存布局的方法：<br>
cl 源文件名 /d1 reportSingleClassLayout类名<br>
注意：类名不要太短，否则屏幕会显示一大堆东西，找起来很麻烦。<br>
例如，查看BBB类，源代码文件是demo01.cpp：<br>
cl demo01.cpp /d1 reportSingleClassLayoutBBB</p>
<p>cl命令环境变量：<br>
1）在PATH环境变量中增加cl.exe的目录<br>
C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.30.30705\bin\Hostx64\x64<br>
2）增加INCLUDE环境变量，内容如下：<br>
C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.30.30705\include<br>
C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\shared<br>
C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt<br>
C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\um<br>
C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\winrt<br>
3）增加LIB环境变量，内容如下：<br>
C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.30.30705\lib\x64<br>
C:\Program Files (x86)\Windows Kits\10\Lib\10.0.19041.0\um\x64<br>
C:\Program Files (x86)\Windows Kits\10\Lib\10.0.19041.0\ucrt\x64</p>
<p>示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>void* operator new(size_t size)   // 重载new运算符。<br>
{<br>
void* ptr = malloc(size);        // 申请内存。<br>
cout &lt;&lt; “申请到的内存的地址是：” &lt;&lt; ptr &lt;&lt; “，大小是：” &lt;&lt; size &lt;&lt; endl;<br>
return ptr;<br>
}</p>
<p>void operator delete(void* ptr)   // 重载delete运算符。<br>
{<br>
if (ptr == 0) return;       // 对空指针delete是安全的。<br>
free(ptr);      // 释放内存。<br>
cout &lt;&lt; “释放了内存。\n”;<br>
}</p>
<p>class A {        // 基类<br>
public:<br>
int m_a = 10;<br>
protected:<br>
int m_b = 20;<br>
private:<br>
int m_c = 30;<br>
public:<br>
A() {<br>
cout &lt;&lt; "A中this指针是： " &lt;&lt; this &lt;&lt; endl;<br>
cout &lt;&lt; “A中m_a的地址是：” &lt;&lt; &amp;m_a &lt;&lt; endl;<br>
cout &lt;&lt; “A中m_b的地址是：” &lt;&lt; &amp;m_b &lt;&lt; endl;<br>
cout &lt;&lt; “A中m_c的地址是：” &lt;&lt; &amp;m_c &lt;&lt; endl;<br>
}<br>
void func() { cout &lt;&lt; “m_a=” &lt;&lt; m_a &lt;&lt; “,m_b=” &lt;&lt; m_b &lt;&lt; “,m_c=” &lt;&lt; m_c &lt;&lt; endl; }<br>
};</p>
<p>class B :public A        // 派生类<br>
{<br>
public:<br>
int m_d = 40;<br>
B() {<br>
cout &lt;&lt; "B中this指针是： " &lt;&lt; this &lt;&lt; endl;<br>
cout &lt;&lt; “B中m_a的地址是：” &lt;&lt; &amp;m_a &lt;&lt; endl;<br>
cout &lt;&lt; “B中m_b的地址是：” &lt;&lt; &amp;m_b &lt;&lt; endl;<br>
//cout &lt;&lt; “B中m_c的地址是：” &lt;&lt; &amp;m_c &lt;&lt; endl;<br>
cout &lt;&lt; “B中m_d的地址是：” &lt;&lt; &amp;m_d &lt;&lt; endl;<br>
}<br>
void func1() { cout &lt;&lt; “m_d=” &lt;&lt; m_d &lt;&lt; endl; }<br>
};</p>
<p>int main()<br>
{<br>
cout &lt;&lt; “基类占用内存的大小是：” &lt;&lt; sizeof(A) &lt;&lt; endl;<br>
cout &lt;&lt; “派生类占用内存的大小是：” &lt;&lt; sizeof(B) &lt;&lt; endl;</p>
<pre><code>B *p=new B;
p-&gt;func(); p-&gt;func1();
// memset(p, 0, sizeof(B));
*((int*)p + 2) = 31;        // 把基类私有成员m_c的值修改成31。
p-&gt;func(); p-&gt;func1();
delete p;
</code></pre>
<p>}</p>
<h2 id="如何构造基类">如何构造基类</h2>
<p>派生类构造函数的要点如下：<br>
1）创建派生类对象时，程序首先调用基类构造函数，然后再调用派生类构造函数。<br>
2）如果没以指定基类构造函数，将使用基类的默认构造函数。<br>
3）可以用初始化列表指明要使用的基类构造函数。<br>
4）基类构造函数负责初始化被继承的数据成员；派生类构造函数主要用于初始化新增的数据成员。<br>
5）派生类的构造函数总是调用一个基类构造函数，包括拷贝构造函数。</p>
<p>示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class A {        // 基类<br>
public:<br>
int m_a;<br>
private:<br>
int m_b;<br>
public:<br>
A() : m_a(0) , m_b(0)                     // 基类的默认构造函数。<br>
{<br>
cout &lt;&lt; “调用了基类的默认构造函数A()。\n”;<br>
}<br>
A(int a,int b) : m_a(a) , m_b(b)     // 基类有两个参数的构造函数。<br>
{<br>
cout &lt;&lt; “调用了基类的构造函数A(int a,int b)。\n”;<br>
}<br>
A(const A &amp;a) : m_a(a.m_a+1) , m_b(a.m_b+1)   // 基类的拷贝构造函数。<br>
{<br>
cout &lt;&lt; “调用了基类的拷贝构造函数A(const A &amp;a)。\n”;<br>
}</p>
<pre><code>// 显示基类A全部的成员。
void showA() { cout &lt;&lt; "m_a=" &lt;&lt; m_a &lt;&lt; ",m_b=" &lt;&lt; m_b &lt;&lt; endl; }
</code></pre>
<p>};</p>
<p>class B :public A        // 派生类<br>
{<br>
public:<br>
int m_c;<br>
B() : m_c(0) , A()             // 派生类的默认构造函数，指明用基类的默认构造函数（不指明也无所谓）。<br>
{<br>
cout &lt;&lt; “调用了派生类的默认构造函数B()。\n”;<br>
}<br>
B(int a, int b, int c) : A(a, b), m_c©           // 指明用基类的有两个参数的构造函数。<br>
{<br>
cout &lt;&lt; “调用了派生类的构造函数B(int a,int b,int c)。\n”;<br>
}<br>
B(const A&amp; a, int c) :A(a), m_c©              // 指明用基类的拷贝构造函数。<br>
{<br>
cout &lt;&lt; “调用了派生类的构造函数B(const A &amp;a,int c) 。\n”;<br>
}</p>
<pre><code>// 显示派生类B全部的成员。
void showB() { cout &lt;&lt; "m_c=" &lt;&lt; m_c &lt;&lt; endl &lt;&lt; endl; }
</code></pre>
<p>};</p>
<p>int main()<br>
{<br>
B b1;                 // 将调用基类默认的构造函数。<br>
b1.showA();     b1.showB();</p>
<pre><code>B b2(1, 2, 3);      // 将调用基类有两个参数的构造函数。
b2.showA();     b2.showB();
        
A a(10, 20);      // 创建基类对象。
B b3(a, 30);      // 将调用基类的拷贝造函数。
b3.showA();     b3.showB();
</code></pre>
<p>}</p>
<h2 id="名字遮蔽与类作用域">名字遮蔽与类作用域</h2>
<p>如果派生类中的成员（包括成员变量和成员函数）和基类中的成员重名，通过派生类对象或者在派生类的成员函数中使用该成员时，将使用派生类新增的成员，而不是基类的。<br>
注意：基类的成员函数和派生类的成员函数不会构成重载，如果派生类有同名函数，那么就会遮蔽基类中的所有同名函数。<br>
类是一种作用域，每个类都有它自己的作用域，在这个作用域之内定义成员。<br>
在类的作用域之外，普通的成员只能通过对象（可以是对象本身，也可以是对象指针或对象引用）来访问，静态成员可以通过对象访问，也可以通过类访问。<br>
在成员名前面加类名和域解析符可以访问对象的成员。<br>
如果不存在继承关系，类名和域解析符可以省略不写。<br>
当存在继承关系时，基类的作用域嵌套在派生类的作用域中。如果成员在派生类的作用域中已经找到，就不会在基类作用域中继续查找；如果没有找到，则继续在基类作用域中查找。<br>
如果在成员的前面加上类名和域解析符，就可以直接使用该作用域的成员。<br>
示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class A {        // 基类<br>
public:<br>
int m_a=10;<br>
void func() { cout &lt;&lt; “调用了A的func()函数。\n”; }<br>
};</p>
<p>class B :public A {       // 子类<br>
public:<br>
int m_a = 20;<br>
void func() { cout &lt;&lt; “调用了B的func()函数。\n”; }<br>
};</p>
<p>class C :public B {       // 孙类<br>
public:<br>
int m_a = 30;<br>
void func() { cout &lt;&lt; “调用了C的func()函数。\n”; }<br>
void show() {<br>
cout &lt;&lt; “C::m_a的值是：” &lt;&lt; C::m_a &lt;&lt; endl;<br>
cout &lt;&lt; “B::m_a的值是：” &lt;&lt; B::m_a &lt;&lt; endl;<br>
cout &lt;&lt; “A::m_a的值是：” &lt;&lt; B::A::m_a &lt;&lt; endl;<br>
}<br>
};</p>
<p>int main()<br>
{<br>
C c;<br>
cout &lt;&lt; “C::m_a的值是：” &lt;&lt; c.C::m_a &lt;&lt; endl;<br>
cout &lt;&lt; “B::m_a的值是：” &lt;&lt; c.B::m_a &lt;&lt; endl;<br>
cout &lt;&lt; “A::m_a的值是：” &lt;&lt; c.B::A::m_a &lt;&lt; endl;<br>
c.C::func();<br>
c.B::func();<br>
c.B::A::func();<br>
}</p>
<h2 id="继承的特殊关系">继承的特殊关系</h2>
<p>派生类和基类之间有一些特殊关系。<br>
1）如果继承方式是公有的，派生类对象可以使用基类成员。<br>
2）可以把派生类对象赋值给基类对象（包括私有成员），但是，会舍弃非基类的成员。<br>
3）基类指针可以在不进行显式转换的情况下指向派生类对象。<br>
4）基类引用可以在不进行显式转换的情况下引用派生类对象。<br>
注意：<br>
1）基类指针或引用只能调用基类的方法，不能调用派生类的方法。<br>
2）可以用派生类构造基类。<br>
3）如果函数的形参是基类，实参可以用派生类。<br>
4）C++要求指针和引用类型与赋给的类型匹配，这一规则对继承来说是例外。但是，这种例外只是单向的，不可以将基类对象和地址赋给派生类引用和指针（没有价值，没有讨论的必要）。<br>
示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class A {        // 基类<br>
public:<br>
int m_a=0;<br>
private:<br>
int m_b=0;<br>
public:<br>
// 显示基类A全部的成员。<br>
void show() { cout &lt;&lt; “A::show() m_a=” &lt;&lt; m_a &lt;&lt; “,m_b=” &lt;&lt; m_b &lt;&lt; endl; }<br>
// 设置成员m_b的值。<br>
void setb(int b) { m_b = b;  }<br>
};</p>
<p>class B :public A        // 派生类<br>
{<br>
public:<br>
int m_c=0;<br>
// 显示派生类B全部的成员。<br>
void show() { cout &lt;&lt; “B::show() m_a=” &lt;&lt; m_a &lt;&lt; “m_c=” &lt;&lt; m_c &lt;&lt; endl; }<br>
};</p>
<p>int main()<br>
{<br>
B b;<br>
A* a = &amp;b;</p>
<pre><code>b.m_a = 10; 
b.setb(20);          // 设置成员m_b的值。
b.m_c = 30;
b.show();            // 调用的是B类的show()函数。

a-&gt;m_a = 11;
a-&gt;setb(22);          // 设置成员m_b的值。
// a-&gt;m_c = 30;

a-&gt;show();         // 调用的是A类的show()函数。
</code></pre>
<p>}</p>
<h2 id="多继承与虚继承">多继承与虚继承</h2>
<p>多继承的语法：<br>
class 派生类名 : [继承方式1] 基类名1, [继承方式2] 基类名2,…<br>
{<br>
派生类新增加的成员<br>
};</p>
<p>菱形继承<br>
虚继承可以解决菱形继承的二义性和数据冗余的问题。<br>
有了多继承，就存在菱形继承，有了菱形继承就有虚继承，增加了复杂性。<br>
不提倡使用多继承，只有在比较简单和不出现二义性的情况时才使用多继承，能用单一继承解决的问题就不要使用多继承。<br>
如果继承的层次很多、关系很复杂，程序的编写、调试和维护工作都会变得更加困难，由于这个原因，C++之后的很多面向对象的编程语言，例如 Java、C#、PHP 等，都不支持多继承。</p>
<p>多继承示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class A1 {        // 基类一<br>
public:<br>
int m_a = 10;<br>
};</p>
<p>class A2 {        // 基类二<br>
public:<br>
int m_a = 20;<br>
};</p>
<p>class B :public A1, public A2 {       // 派生类<br>
public:<br>
int m_a = 30;<br>
};</p>
<p>int main()<br>
{<br>
B b;<br>
cout &lt;&lt; " B::m_a的值是：" &lt;&lt; b.m_a &lt;&lt; endl;<br>
cout &lt;&lt; “A1::m_a的值是：” &lt;&lt; b.A1::m_a &lt;&lt; endl;<br>
cout &lt;&lt; “A2::m_a的值是：” &lt;&lt; b.A2::m_a &lt;&lt; endl;<br>
}</p>
<p>菱形继承示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class A {<br>
public:<br>
int m_a = 10;<br>
};</p>
<p>class B : virtual public A { };</p>
<p>class C : virtual public A { };</p>
<p>class DD : public B, public C {};</p>
<p>int main()<br>
{<br>
DD d;<br>
// d.B::m_a = 30;<br>
// d.C::m_a = 80;<br>
d.m_a = 80;<br>
cout &lt;&lt; “B::m_a的地址是：” &lt;&lt; &amp;d.B::m_a &lt;&lt; “，值是：” &lt;&lt; d.B::m_a &lt;&lt; endl;<br>
cout &lt;&lt; “C::m_a的地址是：” &lt;&lt; &amp;d.C::m_a &lt;&lt; “，值是：” &lt;&lt; d.C::m_a &lt;&lt; endl;<br>
}</p>

                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8815%EF%BC%89%E7%B1%BB%E7%BB%A7%E6%89%BF/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8814%EF%BC%89C-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">
                            C++学习笔记（14）C++类型转换
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/08
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        <h2 id="一、自动类型转换">一、自动类型转换</h2>
<p>对于内置类型，如果两种数据类型是兼容的，C++可以自动转换，如果从更大的数转换为更小的数，可能会被截断或损失精度。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> count = <span class="number">8</span>;        <span class="comment">// int转换为long</span></span><br><span class="line"><span class="type">double</span> time = <span class="number">11</span>;      <span class="comment">// int转换为double</span></span><br><span class="line"><span class="type">int</span> side = <span class="number">3.33</span>         <span class="comment">// double转换为int的3</span></span><br></pre></td></tr></tbody></table></figure>
<p>C<ins>不自动转换不兼容的类型，下面语句是非法的：<br>
<code>int* ptr = 8;</code><br>
不能自动转换时，可以使用<strong>强制类型转换</strong>：<br>
<code>int* p = (int*)8;</code><br>
如果某种类型与类相关，从某种类型转换为类类型是有意义的。<br>
string str = “我是一只傻傻鸟。”;<br>
在C</ins>中，将一个参数的构造函数用作自动类型转换函数，它是自动进行的，不需要显式的转换。<br>
CGirl g1(8);          // 常规的写法。<br>
CGirl g1 = CGirl(8);   // 显式转换。<br>
CGirl g1 = 8;         // 隐式转换。<br>
CGirl g1;             // 创建对象。<br>
g1 = 8;              // 隐式转换，用CGirl(8)创建临时对象，再赋值给g。<br>
注意：<br>
1）一个类可以有多个转换函数。<br>
2）多个参数的构造函数，除第一个参数外，如果其它参数都有缺省值，也可以作为转换函数。<br>
3）CGirl(int)的隐式转换的场景：<br>
	将CGirl对象初始化为int值时。  CGirl g1 = 8;<br>
	将int值赋给CGirl对象时。      CGirl g1; g1 = 8;<br>
	将int值传递给接受CGirl参数的函数时。<br>
	返回值被声明为CGirl的函数试图返回int值时。<br>
	在上述任意一种情况下，使用可转换为int类型的内置类型时。<br>
4）如果自动类型转换有二义性，编译将报错。<br>
将构造函数用作自动类型转换函数似乎是一项不错的特性，但有时候会导致意外的类型转换。explicit关键字用于关闭这种自动特性，但仍允许显式转换。<br>
explicit CGirl(int bh);<br>
CGirl g=8;        // 错误。<br>
CGirl g=CGirl(8);  // 显式转换，可以。<br>
CGirl g=(CGirl)8;  // 显式转换，可以。<br>
在实际开发中，如果强调的是构造，建议使用explicit，如果强调的是类型转换，则不使用explicit。<br>
示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class CGirl       // 超女类CGirl。<br>
{<br>
public:<br>
int         m_bh;           // 编号。<br>
string    m_name;     // 姓名。<br>
double  m_weight;   // 体重，单位：kg。</p>
<pre><code>// 默认构造函数。
CGirl() { m_bh = 0;  m_name.clear();  m_weight = 0; cout &lt;&lt; "调用了CGirl()\n"; }
// 自我介绍的方法。
void show() { cout &lt;&lt; "bh=" &lt;&lt; m_bh &lt;&lt; ",name=" &lt;&lt; m_name &lt;&lt; ",weight=" &lt;&lt; m_weight &lt;&lt; endl; }
explicit CGirl(int bh) { m_bh = bh;  m_name.clear();  m_weight = 0; cout &lt;&lt; "调用了CGirl(int bh)\n"; }
//CGirl(double weight) { m_bh = 0;  m_name.clear();  m_weight = weight; cout &lt;&lt; "调用了CGirl(double weight)\n"; }
</code></pre>
<p>};</p>
<p>int main()<br>
{<br>
//CGirl g1(8);                // 常规的写法。<br>
//CGirl g1 = CGirl(8);   // 显式转换。<br>
//CGirl g1 = 8;             // 隐式转换。<br>
CGirl g1;                    // 创建对象。<br>
g1 = (CGirl)8;                      // 隐式转换，用CGirl(8)创建临时对象，再赋值给g。<br>
//CGirl g1 = 8.7;             // 隐式转换。<br>
<a target="_blank" rel="noopener" href="//g1.show">//g1.show</a>();<br>
}</p>
<h2 id="二、转换函数">二、转换函数</h2>
<p>构造函数只用于从某种类型到类类型的转换，如果要进行相反的转换，可以使用特殊的运算符函数-转换函数。<br>
语法：operator 数据类型();<br>
注意：转换函数必须是类的成员函数；不能指定返回值类型；不能有参数。<br>
可以让编译器决定选择转换函数（隐式转换），可以像使用强制类型转换那样使用它们（显式转换）。<br>
int ii=girl;       // 隐式转换。<br>
int ii=(int) girl;  // 显式转换。<br>
int ii=int(girl);   // 显式转换。<br>
如果隐式转换存在二义性，编译器将报错。<br>
在C<ins>98中，关键字explicit不能用于转换函数，但C</ins>11消除了这种限制，可以将转换函数声明为显式的。<br>
还有一种方法是：用一个功能相同的普通成员函数代替转换函数，普通成员函数只有被调用时才会执行。<br>
int ii=girl.to_int();<br>
警告：应谨慎的使用隐式转换函数。通常，最好选择仅在被显式地调用时才会执行的成员函数。<br>
示例：<br>
#include <iostream>         // 包含头文件。<br>
using namespace std;        // 指定缺省的命名空间。</iostream></p>
<p>class CGirl       // 超女类CGirl。<br>
{<br>
public:<br>
int         m_bh;           // 编号。<br>
string    m_name;     // 姓名。<br>
double  m_weight;   // 体重，单位：kg。</p>
<pre><code>// 默认构造函数。
CGirl() { m_bh = 8;  m_name="西施";  m_weight = 50.7; }
explicit operator int()  { return m_bh; }
int to_int() { return m_bh; }
operator string() { return m_name; }
explicit operator double() { return m_weight; }
</code></pre>
<p>};</p>
<p>int main()<br>
{<br>
string name = “西施”;                 // char * 转换成 string<br>
const char* ptr = name;             // string 转换成 char <em>，错误<br>
const char</em> ptr = name.c_str();  // 返回char *，正确</p>
<pre><code>CGirl g;
int a = g.to_int();         cout &lt;&lt; "a的值是：" &lt;&lt; a &lt;&lt; endl;
string b = string(g);    cout &lt;&lt; "b的值是：" &lt;&lt; b &lt;&lt; endl;
double c = double(g);  cout &lt;&lt; "c的值是：" &lt;&lt; c &lt;&lt; endl;
short d = (int)g;
</code></pre>
<p>}</p>

                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8814%EF%BC%89C-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8811%EF%BC%89%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/">
                            C++学习笔记（11）函数重载
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/05
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        <h2 id="一、函数重载">一、函数重载</h2>
<p>函数重载（函数多态）是指  <u><strong>设计一系列同名函数，让它们完成相同（似）的工作</strong></u>。<br>
C++允许定义名称相同的函数，条件是<strong>它们的特征（形参的个数、数据类型和排列顺序）不同</strong>。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">short</span> a  ,string b)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a    ,string b)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">double</span> a,string b)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a    ,string b, <span class="type">int</span> len)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(string b , <span class="type">int</span> a)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>调用重载函数的时候，在代码中我们用相同的函数名，但是，后面的实参不一样，编译器根据实参与重载函数的形参进行匹配，然后决定调用具体的函数，如果匹配失败，编译器将视为错误。</p>
<p>在实际开发中，视需求重载各种数据类型，<strong>不要重载功能不同的函数</strong>。</p>
<p>注意：</p>
<ul>
<li>使用重载函数时，如果数据类型不匹配，C++尝试使用类型转换与形参进行匹配，如果转换后有多个函数能匹配上，编译将报错。</li>
<li>引用可以作为函数重载的条件，但是，调用重载函数的时候，如果实参是变量，编译器将形参类型的本身和类型引用视为同一特征。</li>
<li>如果重载函数有默认参数，调用函数时，可能导致匹配失败。</li>
<li>const不能作为函数重载的特征。</li>
<li>返回值的数据类型不同不能作为函数重载的特征。</li>
<li>C++的名称修饰：编译时，对每个函数名进行加密，替换成不同名的函数。</li>
</ul>
<figure class="highlight d"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MyFunctionFoo(<span class="keyword">int</span>,<span class="built_in">float</span>);</span><br><span class="line"><span class="keyword">void</span> MyFunctionFoo(<span class="built_in">long</span>,<span class="built_in">float</span>);</span><br><span class="line">?MyFunctionFoo@<span class="keyword">@YAXH</span>(<span class="keyword">int</span>,<span class="built_in">float</span>);</span><br><span class="line">#<span class="keyword">void</span> MyFunctionFoo^$@(<span class="built_in">long</span>,<span class="built_in">float</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myswap</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span>     <span class="comment">// 交换两个整型变量的值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> tmp = a; a = b; b = tmp;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myswap</span><span class="params">(string&amp; a, string&amp; b)</span>     <span class="comment">// 交换两个字符串变量的值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	string tmp = a; a = b; b = tmp;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>, b = <span class="number">5</span>;</span><br><span class="line">	<span class="built_in">myswap</span>(a, b);</span><br><span class="line">	cout &lt;&lt; <span class="string">"a="</span> &lt;&lt; a &lt;&lt; <span class="string">",b="</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	string c = <span class="string">"西施"</span>, d = <span class="string">"西瓜"</span>;</span><br><span class="line">	<span class="built_in">myswap</span>(c, d);</span><br><span class="line">	cout &lt;&lt; <span class="string">"c="</span> &lt;&lt; c &lt;&lt; <span class="string">",d="</span> &lt;&lt; d &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="二、内联函数">二、内联函数</h2>
<p>C++将内联函数的代码组合到程序中，可以提高程序运行的速度。<br>
语法：<strong>在函数声明和定义前加上关键字inline</strong>。<br>
通常的做法是将函数声明和定义写在一起。<br>
注意：</p>
<ul>
<li>内联函数节省时间，但消耗内存。</li>
<li>如果函数过大，编译器可能不将其作为内联函数。</li>
<li>内联函数不能递归。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">const</span> <span class="type">short</span> bh, <span class="type">const</span> string message)</span>   <span class="comment">// 表白函数。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; bh &lt;&lt; <span class="string">"号："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">//show(3, "我是一只傻傻鸟。");</span></span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span> bh = <span class="number">3</span>;</span><br><span class="line">		string message = <span class="string">"我是一只傻傻鸟。"</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; bh &lt;&lt; <span class="string">"号："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">// show(8, "我有一只小小鸟。");</span></span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span> bh = <span class="number">8</span>;</span><br><span class="line">		string message = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; bh &lt;&lt; <span class="string">"号："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">// show(5, "我是一只小小鸟。");</span></span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span> bh = <span class="number">5</span>;</span><br><span class="line">		string message = <span class="string">"我是一只小小鸟。"</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; bh &lt;&lt; <span class="string">"号："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8811%EF%BC%89%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8810%EF%BC%89%E5%BC%95%E7%94%A8/">
                            C++学习笔记（10）引用
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/05
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        <h2 id="一、引用的基本概念">一、引用的基本概念</h2>
<p>引用变量是C++新增的<strong>复合类型</strong>。<br>
引用是<strong>已定义的变量的别名</strong>。<br>
引用的主要用途是<u>用作函数的<strong>形参</strong>和<strong>返回值</strong></u>。<br>
声明/创建引用的语法：<code>数据类型 &amp;引用名=原变量名;</code><br>
注意：</p>
<ul>
<li>引用的数据类型要与原变量名的<strong>数据类型相同</strong>。</li>
<li>引用名和原变量名可以互换，它们值和内存单元是相同的。</li>
<li>必须在声明引用的时候初始化，初始化后<strong>不可改变</strong>。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// 声明 / 创建引用的语法：数据类型 &amp; 引用名 = 原变量名;</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>;          <span class="comment">// 声明普通的整型变量。</span></span><br><span class="line">	<span class="type">int</span>&amp; ra = a;      <span class="comment">// 创建引用ra，ra是a的别名。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a  &lt;&lt; <span class="string">"， a的值是："</span> &lt;&lt;  a  &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"，ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	ra = <span class="number">5</span>;    </span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a &lt;&lt; <span class="string">"， a的值是："</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"，ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="二、引用的本质">二、引用的本质</h2>
<p>引用是<strong>指针常量</strong>的伪装。<br>
引用是编译器提供的一个<strong>有用且安全</strong>的工具，去除了指针的一些缺点，禁止了部分不安全的操作。</p>
<p>变量是什么？变量就是一个<strong>在程序执行过程中可以改变的量</strong>。<br>
换一个角度，变量是一块内存区域的名字，它代表了这块内存区域，当我们对变量进行修改的时候，会引起内存区域中内容的改变。<br>
在计算机看来，内存区域根本就不存在什么名字，它仅有的标志就是它的地址，因此我们若想修改一块内存区域的内容，只有知道他的地址才能实现。<br>
所谓的变量只不过是编译器给我们进行的一种抽象，让我们不必去了解更多的细节，降低我们的思维跨度而已。<br>
程序员拥有引用，但编译器仅拥有指针（地址）。<br>
引用的底层机制实际上是和指针一样的。不要相信有别名，不要认为引用可以节省一个指针的空间，因为这一切不会发生，编译器还是会把引用解释为指针。<br>
==引用和指针本质上没有区别。==</p>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// 声明 / 创建引用的语法：数据类型 &amp; 引用名 = 原变量名;</span></span><br><span class="line">	<span class="comment">// 语法：数据类型 * const 变量名;</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>;                         <span class="comment">// 声明普通的整型变量。</span></span><br><span class="line">	<span class="type">int</span>&amp; ra = a;                    <span class="comment">// 创建引用ra，ra是a的别名。               把int&amp;替换成int* const   把a替换成&amp;a</span></span><br><span class="line">	<span class="type">int</span>* <span class="type">const</span> rb = &amp;a;        <span class="comment">// 声明指针常量rb，让它指向变量a。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a  &lt;&lt; <span class="string">"，  a的值是："</span> &lt;&lt;  a  &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"， ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;     <span class="comment">// 把&amp;ra替换成ra，把ra替换成*ra</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"rb的值是  ："</span> &lt;&lt; rb &lt;&lt; <span class="string">"，*rb的值是："</span> &lt;&lt; *rb &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	ra = <span class="number">5</span>;    </span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a &lt;&lt; <span class="string">"，  a的值是："</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"， ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"rb的值是  ："</span> &lt;&lt; rb &lt;&lt; <span class="string">"，*rb的值是："</span> &lt;&lt; *rb &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="三、引用用于函数的参数">三、引用用于函数的参数</h2>
<p>把函数的形参声明为引用，调用函数的时候，形参将成为实参的别名。<br>
这种方法也叫按<strong>引用传递</strong>或<strong>传引用</strong>。（传值、传地址、传引用只是说法不同，其实都是传值。）<br>
引用的本质是指针，传递的是变量的地址，在函数中，<u>修改形参会影响实参</u>。</p>
<ol>
<li>传引用的代码更简洁。</li>
<li>传引用不必使用二级指针。</li>
<li>引用的属性和特别之处。</li>
</ol>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> no, string str)</span>    <span class="comment">// 传值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	no = <span class="number">8</span>; </span><br><span class="line">	str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span>* no, string* str)</span>    <span class="comment">// 传地址。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	*no = <span class="number">8</span>;</span><br><span class="line">	*str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; *no &lt;&lt; <span class="string">"号："</span> &lt;&lt; *str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(<span class="type">int</span> &amp;no, string &amp;str)</span>    <span class="comment">// 传引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	no = <span class="number">8</span>;</span><br><span class="line">	str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh = <span class="number">3</span>;      <span class="comment">// 超女的编号。</span></span><br><span class="line">	string message = <span class="string">"我是一只傻傻鸟。"</span>;          <span class="comment">// 向超女表白的内容。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//func1(bh, message);                  // 传值。</span></span><br><span class="line">	<span class="comment">//func2(&amp;bh, &amp;message);            // 传地址。</span></span><br><span class="line">	<span class="built_in">func3</span>(bh, message);                  <span class="comment">// 传引用。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; bh &lt;&lt; <span class="string">"号："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span>      <span class="comment">// 定义超女结构体。</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span> no;            <span class="comment">// 超女编号。</span></span><br><span class="line">	string str;      <span class="comment">// 表白内容。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(st_girl girl)</span>    <span class="comment">// 传值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	girl.no = <span class="number">8</span>;</span><br><span class="line">	girl.str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl.no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl.str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(st_girl *girl)</span>    <span class="comment">// 传地址。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	girl-&gt;no = <span class="number">8</span>;</span><br><span class="line">	girl-&gt;str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl-&gt;no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl-&gt;str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(st_girl &amp; girl)</span>    <span class="comment">// 传引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	girl.no = <span class="number">8</span>;</span><br><span class="line">	girl.str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl.no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl.str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	st_girl girl = { <span class="number">3</span>,<span class="string">"我是一只傻傻鸟。"</span> };</span><br><span class="line"></span><br><span class="line">	<span class="built_in">func1</span>(girl);                  <span class="comment">// 传值。</span></span><br><span class="line">	<span class="comment">//func2(&amp;girl);            // 传地址。</span></span><br><span class="line">	<span class="comment">//func3(girl);                  // 传引用。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl.no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl.str &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span>** p)</span>      <span class="comment">// 传地址，实参是指针的地址，形参是二级指针。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	*p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">3</span>);       <span class="comment">// p是二级指针，存放指针的地址。</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"func1内存的地址是："</span> &lt;&lt; *p &lt;&lt; <span class="string">"，内存中的值是："</span> &lt;&lt; **p &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span>*&amp; p)</span>     <span class="comment">// 传引用，实参是指针，形参是指针的别名。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">3</span>);         <span class="comment">// p是指针的别名。</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"func2内存的地址是："</span> &lt;&lt; p &lt;&lt; <span class="string">"，内存中的值是："</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span>* p = <span class="literal">nullptr</span>;    <span class="comment">// 存放在子函数中动态分配内存的地址。</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">func1</span>(&amp;p);      <span class="comment">// 传地址，实参填指针p的地址。</span></span><br><span class="line">	<span class="comment">//func2(p);      // 传引用，实参填指针p。</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"main 内存的地址是："</span> &lt;&lt; p &lt;&lt; <span class="string">"，内存中的值是："</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> p;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="四、引用的形参和const">四、引用的形参和const</h2>
<p>如果引用的数据对象类型不匹配，当引用为const时，C++将创建<strong>临时变量</strong>，让引用指向临时变量。<br>
什么时候将创建临时变量呢？</p>
<ul>
<li>引用是const。</li>
<li>数据对象的类型是正确的，但不是左值。</li>
<li>数据对象的类型不正确，但可以转换为正确的类型。</li>
</ul>
<p>结论：如果函数的实参不是左值或与const引用形参的类型不匹配，那么C++将创建正确类型的匿名变量，将实参的值传递给匿名变量，并让形参来引用该变量。</p>
<p>将引用形参声明为const的理由有三个：</p>
<ul>
<li>使用const可以避免无意中修改数据的编程错误。</li>
<li>使用const使函数能够处理const和非const实参，否则将只能接受非const实参。</li>
<li>使用const，函数能正确生成并使用临时变量。</li>
</ul>
<p>左值是可以被引用的数据对象，可以通过地址访问它们，例如：变量、数组元素、结构体成员、引用和解引用的指针。<br>
非左值包括字面常量（用双引号包含的字符串除外）和包含多项的表达式。</p>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> no, string str)</span>    <span class="comment">// 传值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">const</span> <span class="type">int</span>* no,<span class="type">const</span> string* str)</span>    <span class="comment">// 传地址。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; *no &lt;&lt; <span class="string">"号："</span> &lt;&lt; *str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; no, <span class="type">const</span> string&amp; str)</span>    <span class="comment">// 传引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">//int bh = 3;      // 超女的编号。</span></span><br><span class="line">	<span class="comment">//string message = "我是一只傻傻鸟。";          // 向超女表白的内容。</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="built_in">func1</span>(<span class="number">8</span>, <span class="string">"我是一只小小鸟。"</span>);</span><br><span class="line">	<span class="comment">// func2(8, "我是一只小小鸟。");</span></span><br><span class="line">	<span class="built_in">func3</span>(<span class="string">'X'</span>, <span class="string">"我是一只小小鸟。"</span>);</span><br><span class="line">	<span class="comment">////func1(bh, message);                  // 传值。</span></span><br><span class="line">	<span class="comment">////func2(&amp;bh, &amp;message);            // 传地址。</span></span><br><span class="line">	<span class="comment">////func3(bh, message);                  // 传引用。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//cout &lt;&lt; "亲爱的" &lt;&lt; bh &lt;&lt; "号：" &lt;&lt; message &lt;&lt; endl;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="五、引用用于函数的返回值">五、引用用于函数的返回值</h2>
<p>传统的函数返回机制与值传递类似。<br>
函数的返回值被拷贝到一个临时位置（寄存器或栈），然后调用者程序再使用这个值。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> m=<span class="built_in">sqrt</span>(<span class="number">36</span>);      <span class="comment">// sqrt()是求平方根函数。</span></span><br></pre></td></tr></tbody></table></figure>
<p>sqrt(36)的返回值6被拷贝到临时的位置，然后赋值给m。</p>
<p>如果返回的是一个结构体，将把整个结构体拷贝到临时的位置。</p>
<p>==如果返回引用不会拷贝内存。==<br>
语法：<br>
<code>返回值的数据类型&amp; 函数名(形参列表);</code><br>
注意：</p>
<ul>
<li>如果返回局部变量的引用，其本质是野指针，后果不可预知。</li>
<li>可以返回函数的引用形参、类的成员、全局变量、静态变量。</li>
<li>返回引用的函数是被引用的变量的别名，将const用于引用的返回类型。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span> &amp;<span class="title">func2</span><span class="params">(<span class="type">int</span> &amp;ra)</span>    <span class="comment">// 返回的是引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	ra++;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"，ra="</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> ra;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span>&amp; b = <span class="built_in">func2</span>(a);      <span class="comment">// 返回的是引用。</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a &lt;&lt; <span class="string">"， a="</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">" b的地址是："</span> &lt;&lt; &amp;b &lt;&lt; <span class="string">"， b="</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// func2(a) = 10;             // 返回引有的函数是被引用的变量的别名。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// cout &lt;&lt; " a的地址是：" &lt;&lt; &amp;a &lt;&lt; "， a=" &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">// cout &lt;&lt; " b的地址是：" &lt;&lt; &amp;b &lt;&lt; "， b=" &lt;&lt; b &lt;&lt; endl;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="六、各种形参的使用场景">六、各种形参的使用场景</h2>
<p>传值、传地址和传引用的指导原则《C++ Primer Plus》</p>
<ol>
<li>如果不需要在函数中修改实参
<ul>
<li>如果实参很小，如C++内置的数据类型或小型结构体，则按值传递。</li>
<li>如果实参是数组，则使用const指针，因为这是唯一的选择（没有为数组建立引用的说法）。</li>
<li>如果实参是较大的结构，则使用const指针或const引用。</li>
<li>如果实参是类，则使用const引用，传递类的标准方式是按引用传递（类设计的语义经常要求使用引用）。</li>
</ul>
</li>
<li>如果需要在函数中修改实参
<ul>
<li>如果实参是内置数据类型，则使用指针。只要看到func(&amp;x)的调用，表示函数将修改x。</li>
<li>如果实参是数组，则只能使用指针。</li>
<li>如果实参是结构体，则使用指针或引用。</li>
<li>如果实参是类，则使用引用。</li>
</ul>
</li>
</ol>
<p>当然，这只是一些指导原则，很可能有充分的理由做出其他的选择。<br>
例如：对于基本类型，cin使用引用，因此可以使用cin&gt;&gt;a，而不是cin&gt;&gt;&amp;a。</p>
<h2 id="七、函数的默认参数">七、函数的默认参数</h2>
<p>默认参数是指调用函数的时候，如果不书写实参，那么将使用的一个缺省值。<br>
语法：<code>返回值 函数名(数据类型 参数=值, 数据类型 参数=值,……);</code><br>
注意：</p>
<ul>
<li>如果函数的声明和定义是分开书写的，在函数声明中书写默认参数，函数的定义中不能书写默认参数。</li>
<li>函数必须从右到左设置默认参数。也就是说，<u>如果要为某个参数设置默认值，则必须为它后面所有的参数设置默认值</u>。</li>
<li><u>调用函数的时候，如果指定了某个参数的值，那么该参数前面所有的参数都必须指定。</u></li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> bh,<span class="type">const</span> string &amp;name=<span class="string">"西施"</span>, <span class="type">const</span> string&amp; message=<span class="string">"我喜欢你。"</span>)</span>    <span class="comment">// 向超女表白的函数。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span>&lt;&lt;name&lt;&lt;<span class="string">"（"</span>&lt;&lt;bh&lt;&lt;<span class="string">")："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="built_in">func</span>(<span class="number">3</span>,<span class="string">"冰冰"</span>,<span class="string">"我是一只傻傻鸟。"</span>); </span><br><span class="line">	<span class="built_in">func</span>(<span class="number">5</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8810%EF%BC%89%E5%BC%95%E7%94%A8/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%889%EF%BC%89%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E5%85%B1%E5%90%8C%E4%BD%93%E5%92%8C%E6%9E%9A%E4%B8%BE/">
                            C++学习笔记（9）结构体、共同体和枚举
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/05
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        <h2 id="一、结构体的基本概念">一、结构体的基本概念</h2>
<p>结构体是<u>用户自定义的类型，可以将多种数据的表示合并到一起，描述一个完整的对象</u>。<br>
使用结构体有两个步骤：<strong>1）定义结构体描述（类型）；2）创建结构体变量。</strong></p>
<h3 id="1-定义结构体描述">1. 定义结构体描述</h3>
<p>定义结构体描述的语法：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> 结构体名</span><br><span class="line">{</span><br><span class="line">成员一的数据类型  成员名一;</span><br><span class="line">成员二的数据类型  成员名二;</span><br><span class="line">成员三的数据类型  成员名三;</span><br><span class="line">......</span><br><span class="line">成员n的数据类型  成员名n;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p><strong>注意</strong>：</p>
<ul>
<li>结构体名是标识符。</li>
<li>结构体的成员可以是任意数据类型。</li>
<li>定义结构体描述的代码可以放在程序的任何地方，一般放在main函数的上面或头文件中。</li>
<li>结构体成员可以用C++的类（如string），但是不提倡。</li>
<li>在C++中，结构体中可以有函数，但是不提倡。</li>
<li>在C++11中，定义结构体的时候可以指定缺省值。</li>
</ul>
<h3 id="2-创建结构体变量">2. 创建结构体变量</h3>
<p>创建结构体变量的语法：<br>
<code>struct 结构体名 结构体变量名;</code><br>
也可以为结构体成员赋初始值：<br>
<code>struct 结构体名 结构体变量名={成员一的值, 成员二的值,......, 成员n的值};</code><br>
C++11可以不写等于号。<br>
如果大括号内未包含任何东西或只写一个0，全部的成员都将被设置为0。<br>
<code>struct 结构体名 结构体变量名={0};</code></p>
<p><strong>注意</strong>：</p>
<ul>
<li>在C++中，struct关键字可以不写。</li>
<li>可以在定义结构体的时候创建结构体变量。</li>
</ul>
<h3 id="3-使用结构体">3. 使用结构体</h3>
<p>在C++程序中，用成员运算符<code>.</code>来访问结构体的每个成员。结构体中的每个成员具备普通变量的全部特征。<br>
语法：<code>结构体变量名.结构体成员名</code>;</p>
<h3 id="4-占用内存的大小">4. 占用内存的大小</h3>
<p>用<code>sizeof</code>运算符可以得到整个结构体占用内存的大小。<br>
注意：<u>整个结构体占用内存的大小不一定等于全部成员占用内存之和。</u><br>
内存对齐：<code>#pragma pack(字节数)</code><br>
合理使用内存对齐规则，某些节省内存的做法可能毫无意义。</p>
<h3 id="5-清空结构体">5. 清空结构体</h3>
<p>创建的结构体变量如果没有初始化，成员中有垃圾值。<br>
用<code>memset()</code>函数可以把结构体中全部的成员清零。（只适用于C++基本数据类型）</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 6. 复制结构体</span><br><span class="line">- 用```memcpy()```函数把结构体中全部的元素复制到另一个相同类型的结构体（只适用于C++基本数据类型）。</span><br><span class="line">- 也可以直接用等于号（只适用于C++基本数据类型）。</span><br><span class="line">示例：</span><br><span class="line">```cpp</span><br><span class="line">#include &lt;iostream&gt;         // 包含头文件。</span><br><span class="line">using namespace std;        // 指定缺省的命名空间。</span><br><span class="line">#pragma pack(8)</span><br><span class="line"></span><br><span class="line">// 超女基本信息结构体st_girl，存放了超女全部的数据项。</span><br><span class="line">struct st_girl</span><br><span class="line">{</span><br><span class="line">    char name[21];        // 姓名。</span><br><span class="line">    int age;                     // 年龄。</span><br><span class="line">    double weight;        // 体重（kg）。</span><br><span class="line">    char sex;                   // 性别：X-女；Y-男。</span><br><span class="line">    bool yz;                    // 颜值：true-漂亮；false-不漂亮。</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">{</span><br><span class="line">    st_girl stgirl{"西施",26,33.8,'X',true};        // 创建结构体变量。</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; "sizeof(st_girl)=" &lt;&lt; sizeof(st_girl) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    memset(&amp;stgirl, 0, sizeof(stgirl));</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; "姓名：" &lt;&lt; stgirl.name &lt;&lt; "，年龄：" &lt;&lt; stgirl.age &lt;&lt; "，体重：" &lt;&lt; stgirl.weight</span><br><span class="line">        &lt;&lt; "，性别：" &lt;&lt; stgirl.sex &lt;&lt; "，颜值：" &lt;&lt; stgirl.yz &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="二、结构体指针">二、结构体指针</h2>
<p>结构体是一种自定义的数据类型，用结构体可以创建结构体变量。</p>
<h3 id="1-基本语法">1. 基本语法</h3>
<p>在C++中，用不同类型的指针存放不同类型变量的地址，这一规则也适用于结构体。如下：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span> girl;         <span class="comment">// 声明结构体变量girl。</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span> *pst=&amp;girl;  <span class="comment">// 声明结构体指针，指向结构体变量girls。</span></span><br></pre></td></tr></tbody></table></figure>
<p>通过结构体指针访问结构体成员，有两种方法：<br>
<code>(*指针名).成员变量名    // (*pst).name和(*pst).age</code><br>
或者：<br>
<code>指针名-&gt;成员变量名    // pst-&gt;name和*pst-&gt;age</code></p>
<p>注意：与数组不一样，==结构体变量名没有被解释为地址。==</p>
<h3 id="2-用于函数的参数">2. 用于函数的参数</h3>
<p>如果要把结构体传递给函数，实参取结构体变量的地址(结构体的名字不能直接传)，函数的形参用结构体指针。<br>
如果不希望在函数中修改结构体变量的值，可以对形参加const约束。</p>
<h3 id="3-用于动态分配内存">3. 用于动态分配内存</h3>
<p>用结构体指针指向动态分配的内存的地址。<br>
示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS  <span class="comment">// 如果要使用C标准库的字符串函数，需要加上这一行代码</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> name[<span class="number">21</span>];        <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="type">int</span> age;                     <span class="comment">// 年龄。</span></span><br><span class="line">    <span class="type">double</span> weight;        <span class="comment">// 体重（kg）。</span></span><br><span class="line">    <span class="type">char</span> sex;                   <span class="comment">// 性别：X-女；Y-男。</span></span><br><span class="line">    <span class="type">bool</span> yz;                    <span class="comment">// 颜值：true-漂亮；false-不漂亮。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">const</span> st_girl* pst)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; pst-&gt;name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; pst-&gt;age &lt;&lt; <span class="string">"，体重："</span> &lt;&lt; pst-&gt;weight</span><br><span class="line">        &lt;&lt; <span class="string">"，性别："</span> &lt;&lt; pst-&gt;sex &lt;&lt; <span class="string">"，颜值："</span> &lt;&lt; pst-&gt;yz &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// st_girl stgirl={"西施",26,33.8,'X',true};        // 创建结构体变量。</span></span><br><span class="line">    st_girl* stgirl = <span class="keyword">new</span> <span class="built_in">st_girl</span>({ <span class="string">"西施"</span>,<span class="number">26</span>,<span class="number">33.8</span>,<span class="string">'X'</span>,<span class="literal">true</span> });</span><br><span class="line">    <span class="comment">// memset(stgirl, 0, sizeof(st_girl));</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; stgirl-&gt;name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; stgirl-&gt;age &lt;&lt; <span class="string">"，体重："</span> &lt;&lt; stgirl-&gt;weight</span><br><span class="line">             &lt;&lt; <span class="string">"，性别："</span> &lt;&lt; stgirl-&gt;sex &lt;&lt; <span class="string">"，颜值："</span> &lt;&lt; stgirl-&gt;yz &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">func</span>(stgirl);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; stgirl-&gt;name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; stgirl-&gt;age &lt;&lt; <span class="string">"，体重："</span> &lt;&lt; stgirl-&gt;weight</span><br><span class="line">        &lt;&lt; <span class="string">"，性别："</span> &lt;&lt; stgirl-&gt;sex &lt;&lt; <span class="string">"，颜值："</span> &lt;&lt; stgirl-&gt;yz &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> stgirl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="三、结构体数组">三、结构体数组</h2>
<p>结构体可以被定义成数组变量，本质上与其它类型的数组变量没有区别。<br>
声明结构体数组的语法：<code>struct 结构体类型 数组名[数组长度]</code>;<br>
初始化结构体数组，要结合使用初始化数组的规则和初始化结构体的规则。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span> girls[<span class="number">2</span>]={{<span class="string">"西施"</span>,<span class="number">26</span>,<span class="number">43.8</span>,<span class="string">'X'</span>,<span class="literal">true</span>},{<span class="string">"西瓜"</span>,<span class="number">25</span>,<span class="number">52.8</span>,<span class="string">'X'</span>,<span class="literal">false</span>}};</span><br></pre></td></tr></tbody></table></figure>
<p>使用结构体数组可以用数组表示法，也可以用指针表示法。<br>
示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS       <span class="comment">// C标准的字符串操作函数需要加这一行。</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 超女基本信息结构体st_girl，存放了超女全部的数据项。</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> name[<span class="number">21</span>];        <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="type">int</span> age;                     <span class="comment">// 年龄。</span></span><br><span class="line">    <span class="type">double</span> weight;        <span class="comment">// 体重（kg）。</span></span><br><span class="line">    <span class="type">char</span> sex;                   <span class="comment">// 性别：X-女；Y-男。</span></span><br><span class="line">    <span class="type">bool</span> yz;                    <span class="comment">// 颜值：true-漂亮；false-不漂亮。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// st_girl stgirl={"西施",26,33.8,'X',true};        // 创建结构体变量。</span></span><br><span class="line">    st_girl girls[<span class="number">3</span>]; </span><br><span class="line">    <span class="built_in">memset</span>(girls, <span class="number">0</span>, <span class="built_in">sizeof</span>(girls));    <span class="comment">// 清空整个数组。</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">strcpy</span>((girls+<span class="number">0</span>)-&gt;name, <span class="string">"西施"</span>); (girls+<span class="number">0</span>)-&gt;age = <span class="number">25</span>; girls[<span class="number">0</span>].weight = <span class="number">45</span>; girls[<span class="number">0</span>].sex = <span class="string">'X'</span>; girls[<span class="number">0</span>].yz = <span class="literal">true</span>;</span><br><span class="line">    girls[<span class="number">1</span>] = { <span class="string">"西瓜"</span>,<span class="number">2</span>,<span class="number">10.6</span>,<span class="string">'Y'</span>,<span class="literal">false</span> };     <span class="comment">// C++11标准的语法。</span></span><br><span class="line">    *(girls+<span class="number">2</span>) = { <span class="string">"冰冰"</span>,<span class="number">23</span>,<span class="number">50.3</span>,<span class="string">'X'</span>,<span class="literal">true</span> };    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="number">3</span>; ii++)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; (girls+ii)-&gt;name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; (girls + ii)-&gt;age &lt;&lt; <span class="string">"，体重："</span> &lt;&lt; girls[ii].weight</span><br><span class="line">            &lt;&lt; <span class="string">"，性别："</span> &lt;&lt; girls[ii].sex &lt;&lt; <span class="string">"颜值："</span> &lt;&lt; girls[ii].yz &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="四、结构体嵌入数组和结构体">四、结构体嵌入数组和结构体</h2>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 超女基本信息结构体st_girl，存放了超女全部的数据项。</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> name[<span class="number">21</span>];        <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="type">int</span>    score[<span class="number">2</span>][<span class="number">3</span>] = {<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>};          <span class="comment">// 存放评委的打分。</span></span><br><span class="line">    <span class="type">int</span> age;                     <span class="comment">// 年龄。</span></span><br><span class="line">    <span class="type">double</span> weight;        <span class="comment">// 体重（kg）。</span></span><br><span class="line">    <span class="type">char</span> sex;                   <span class="comment">// 性别：X-女；Y-男。</span></span><br><span class="line">    <span class="type">bool</span> yz;                    <span class="comment">// 颜值：true-漂亮；false-不漂亮。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(st_girl* pst)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="number">2</span>; ii++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> jj = <span class="number">0</span>; jj &lt; <span class="number">3</span>; jj++)</span><br><span class="line">            cout &lt;&lt; <span class="string">"pst-&gt;score["</span> &lt;&lt; ii &lt;&lt; <span class="string">"]["</span> &lt;&lt; jj &lt;&lt; <span class="string">"]="</span> &lt;&lt; pst-&gt;score[ii][jj] &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    st_girl girl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">func</span>(&amp;girl);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*for (int ii = 0; ii &lt; 3; ii++) girl.score[ii] = 100 + ii;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    for (int ii = 0; ii &lt; 3; ii++) cout &lt;&lt;"girl.score["&lt;&lt;ii&lt;&lt;"] =" &lt;&lt; girl.score[ii]&lt;&lt;endl;*/</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_pet</span>                <span class="comment">// 宠物结构体。</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> name[<span class="number">21</span>];       <span class="comment">// 宠物的名字。</span></span><br><span class="line">    <span class="type">char</span> type[<span class="number">21</span>];         <span class="comment">// 宠物的物种。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span>                <span class="comment">// 超女基本信息结构体st_girl，存放了超女全部的数据项。</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> name[<span class="number">21</span>];        <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="type">int</span> age;                     <span class="comment">// 年龄。</span></span><br><span class="line">    <span class="type">double</span> weight;        <span class="comment">// 体重（kg）。</span></span><br><span class="line">    <span class="type">char</span> sex;                   <span class="comment">// 性别：X-女；Y-男。</span></span><br><span class="line">    <span class="type">bool</span> yz;                    <span class="comment">// 颜值：true-漂亮；false-不漂亮。</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">st_pet</span> pet;     <span class="comment">// 宠物。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    st_girl girl = { <span class="string">"西施"</span>,<span class="number">23</span>,<span class="number">50.5</span>,<span class="string">'X'</span>,<span class="literal">true</span>,{<span class="string">"宝宝"</span>,<span class="string">"鸭子"</span>} };</span><br><span class="line">    cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; girl.name &lt;&lt; <span class="string">"的宠物是一只"</span> &lt;&lt; girl.pet.type &lt;&lt; <span class="string">"，名字叫"</span> &lt;&lt; girl.pet.name &lt;&lt; <span class="string">"。"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    girl = { <span class="string">"西瓜"</span>,<span class="number">25</span>,<span class="number">51.5</span>,<span class="string">'X'</span>,<span class="literal">true</span>,{<span class="string">"贝贝"</span>,<span class="string">"天鹅"</span>} };     <span class="comment">// C++11标准的语法。</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; girl.name &lt;&lt; <span class="string">"的宠物是一只"</span> &lt;&lt; girl.pet.type &lt;&lt; <span class="string">"，名字叫"</span> &lt;&lt; girl.pet.name &lt;&lt; <span class="string">"。"</span> &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    girl.pet = {<span class="string">"小白"</span>,<span class="string">"狗"</span>};    <span class="comment">// C++11标准的语法。</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; girl.name &lt;&lt; <span class="string">"的宠物是一只"</span> &lt;&lt; girl.pet.type &lt;&lt; <span class="string">"，名字叫"</span> &lt;&lt; girl.pet.name &lt;&lt; <span class="string">"。"</span> &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="五、结构体中的指针">五、结构体中的指针</h2>
<p>如果结构体中的指针指向的是动态分配的内存地址：</p>
<ul>
<li>对结构体用sizeof运算可能没有意义。</li>
<li>对结构体用memset()函数可能会造成内存泄露。</li>
<li>C++的字符串string中有一个指针，指向了动态分配内存的地址。</li>
</ul>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">string</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">char</span> *ptr;   <span class="comment">// 指向动态分配内存的地址。</span></span><br><span class="line">	......</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">st_message</span>         <span class="comment">// QQ报文/消息结构体</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span> srcqq;                   <span class="comment">// 发送方的QQ号码。</span></span><br><span class="line">	<span class="type">int</span> dstqq;                   <span class="comment">// 接收方的QQ号码。</span></span><br><span class="line">	<span class="type">char</span> context[<span class="number">1024</span>];  <span class="comment">// 消息内容。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	st_message message;   <span class="comment">// 创建QQ报文/消息结构体变量。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">memset</span>(message, <span class="number">0</span>, <span class="built_in">sizeof</span>(message));   <span class="comment">// 清空QQ报文/消息结构体。</span></span><br><span class="line">		<span class="comment">// 接收QQ报文/消息。</span></span><br><span class="line">		<span class="comment">// 处理QQ报文/消息。</span></span><br><span class="line">		<span class="comment">// 把QQ报文/消息发送给接收方。</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 其它代码。</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_t</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span>   a;</span><br><span class="line">	<span class="type">int</span> *p;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">st_t</span> stt;                           <span class="comment">// 创建结构体变量。</span></span><br><span class="line">	<span class="built_in">memset</span>(&amp;stt, <span class="number">0</span>, <span class="built_in">sizeof</span>(<span class="type">st_t</span>));</span><br><span class="line"></span><br><span class="line">	stt.a = <span class="number">3</span>;</span><br><span class="line">	stt.p = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">100</span>];     <span class="comment">// 动态创建一个长度为100的整型数组，让指针stt.p指向数组的地址。</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"sizeof(stt)="</span> &lt;&lt; <span class="built_in">sizeof</span>(stt) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"调用前：stt.a="</span> &lt;&lt; stt.a &lt;&lt; <span class="string">",stt.p="</span> &lt;&lt; stt.p &lt;&lt; endl;</span><br><span class="line">	<span class="comment">// memset(&amp;stt, 0, sizeof(st_t));</span></span><br><span class="line">	stt.a = <span class="number">0</span>;      <span class="comment">// 清空成员a。</span></span><br><span class="line">	<span class="built_in">memset</span>(stt.p, <span class="number">0</span>, <span class="number">100</span> * <span class="built_in">sizeof</span>(<span class="type">int</span>));    <span class="comment">// 清空成员p指向的内存中的内容。</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"调用后：stt.a="</span> &lt;&lt; stt.a &lt;&lt; <span class="string">",stt.p="</span> &lt;&lt; stt.p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> [] stt.p;                <span class="comment">// 释放动态分配的内存。</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span></span><br><span class="line">{</span><br><span class="line">	string name;      <span class="comment">// 超女姓名。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	st_girl girl;                           <span class="comment">// 创建结构体变量。</span></span><br><span class="line"></span><br><span class="line">	girl.name = <span class="string">"西施"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.name="</span> &lt;&lt; girl.name &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// memset(&amp;girl, 0, sizeof(girl));</span></span><br><span class="line"></span><br><span class="line">	girl.name = <span class="string">"好大的西瓜"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.name="</span> &lt;&lt; girl.name &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="六、简单链表">六、简单链表</h2>
<p>如果结构体中有一个本结构体的指针，它就是链表。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span> no;</span><br><span class="line">	string name;</span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">st_girl</span> *next;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span>     <span class="comment">// 超女单链表。</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span>      no;                      <span class="comment">// 超女编号。</span></span><br><span class="line">	string name;                 <span class="comment">// 超女姓名。</span></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">st_girl</span>* next;      <span class="comment">// 下一个超女节点的地址，如果本节点是最后一条记录，填nullptr。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	st_girl *head = <span class="literal">nullptr</span>, *tail = <span class="literal">nullptr</span>, *tmp = <span class="literal">nullptr</span>;    <span class="comment">// head头指针、tail尾指针、tmp临时指针。</span></span><br><span class="line"></span><br><span class="line">	tmp=<span class="keyword">new</span> <span class="built_in">st_girl</span>({ <span class="number">1</span>, <span class="string">"西施"</span>, <span class="literal">nullptr</span> });      <span class="comment">// 分配第一个节点。</span></span><br><span class="line">	head = tail = tmp;</span><br><span class="line"></span><br><span class="line">	tmp = <span class="keyword">new</span> <span class="built_in">st_girl</span>({ <span class="number">6</span>, <span class="string">"冰冰"</span>, <span class="literal">nullptr</span> });      <span class="comment">// 分配第二个节点。</span></span><br><span class="line">	tail-&gt;next = tmp;     <span class="comment">// 把上一个节点的next指针指向新节点。</span></span><br><span class="line">	tail = tmp;                 <span class="comment">// 移动尾指针，让尾指针指向刚分配出来的新节点。</span></span><br><span class="line"></span><br><span class="line">	tmp = <span class="keyword">new</span> <span class="built_in">st_girl</span>({ <span class="number">3</span>, <span class="string">"幂幂"</span>, <span class="literal">nullptr</span> });      <span class="comment">// 分配第三个节点。</span></span><br><span class="line">	tail-&gt;next = tmp;     <span class="comment">// 把上一个节点的next指针指向新节点。</span></span><br><span class="line">	tail = tmp;                 <span class="comment">// 移动尾指针，让尾指针指向刚分配出来的新节点。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历链表。</span></span><br><span class="line">	tmp = head;             <span class="comment">// 从头节点开始。</span></span><br><span class="line">	<span class="keyword">while</span> (tmp != <span class="literal">nullptr</span>)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; <span class="string">"no="</span> &lt;&lt; tmp-&gt;no &lt;&lt; <span class="string">"name="</span> &lt;&lt; tmp-&gt;name &lt;&lt; <span class="string">"tmp-&gt;next="</span> &lt;&lt; tmp-&gt;next &lt;&lt; endl;</span><br><span class="line">		tmp = tmp-&gt;next;   <span class="comment">// 顺着next指向往后面找。</span></span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 释放链表。</span></span><br><span class="line">	<span class="keyword">while</span> (head != <span class="literal">nullptr</span>)</span><br><span class="line">	{</span><br><span class="line">		tmp = head;               <span class="comment">// 让临时节点指向头节点。</span></span><br><span class="line">		head = head-&gt;next;  <span class="comment">// 头节点后移。</span></span><br><span class="line">		<span class="keyword">delete</span> tmp;                 <span class="comment">// 删除临时节点。</span></span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="七、共同体">七、共同体</h2>
<p>共同体（共用体、联合体）是一种数据格式，它能存储不同的数据类型，但是，<strong><u>在同一时间只能存储其中的一种类型</u></strong>。<br>
声明共同体的语法：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> 共同体名</span><br><span class="line">{</span><br><span class="line">成员一的数据类型  成员名一;</span><br><span class="line">成员二的数据类型  成员名二;</span><br><span class="line">成员三的数据类型  成员名三;</span><br><span class="line">......</span><br><span class="line">成员n的数据类型  成员名n;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>注意：</p>
<ul>
<li>共同体占用内存的大小是它<strong>最大的成员占用内存的大小</strong>（内存对齐）。</li>
<li>全部的成员<strong>使用同一块内存</strong>。</li>
<li>共同体中的值为<strong>最后被赋值</strong>的那个成员的值。</li>
<li>匿名共同体没有名字，可以在定义的时候创建<strong>匿名共同体变量</strong>（VS和Linux有差别），也可以嵌入结构体中。</li>
</ul>
<p>应用场景：</p>
<ul>
<li>当数据项使用两种或更多种格式（但不会同时使用）时，可节省空间（嵌入式系统）。</li>
<li>用于回调函数的参数（相当于支持多种数据类型）。</li>
</ul>
<p>示例一：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span>          <span class="comment">// 声明共同体udata。</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span>        a;</span><br><span class="line">	<span class="type">double</span> b;</span><br><span class="line">	<span class="type">char</span>     c[<span class="number">25</span>];</span><br><span class="line">} data;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// udata data;     // 定义共同体变量。</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"sizeof(data)="</span> &lt;&lt; <span class="built_in">sizeof</span>(data) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"data.a的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;data.a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"data.b的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;data.b &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"data.c的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;data.c &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	data.a = <span class="number">3</span>;</span><br><span class="line">	data.b = <span class="number">8.8</span>;</span><br><span class="line">	<span class="built_in">strcpy</span>(data.c, <span class="string">"我是一只傻傻鸟。"</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">"data.a="</span> &lt;&lt; data.a &lt;&lt; endl;<span class="comment">//此时a和b都是无意义的乱码</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"data.b="</span> &lt;&lt; data.b &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"data.c="</span> &lt;&lt; data.c &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>示例二：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span>       <span class="comment">// 声明超女结构体。</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span> no;             <span class="comment">// 超女编号。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">union</span>              <span class="comment">// 声明匿名共同体。</span></span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span>        a;</span><br><span class="line">		<span class="type">double</span> b;</span><br><span class="line">		<span class="type">char</span>     c[<span class="number">21</span>];</span><br><span class="line">	};</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">st_girl</span> girl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.a的地址是："</span> &lt;&lt; (<span class="type">void</span>*) &amp;girl.a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.b的地址是："</span> &lt;&lt; (<span class="type">void</span>*) &amp;girl.b &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.c的地址是："</span> &lt;&lt; (<span class="type">void</span>*) &amp;girl.c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	girl.a = <span class="number">3</span>;</span><br><span class="line">	girl.b = <span class="number">8.8</span>;</span><br><span class="line">	<span class="built_in">strcpy</span>(girl.c, <span class="string">"我是一只傻傻鸟。"</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.a="</span> &lt;&lt; girl.a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.b="</span> &lt;&lt; girl.b &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"girl.c="</span> &lt;&lt; girl.c &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="八、枚举">八、枚举</h2>
<p>枚举是一种创建<strong>符号常量</strong>的方法。<br>
枚举的语法：<br>
<code>enum 枚举名 { 枚举量1 , 枚举量2 , 枚举量3, ......, 枚举量n };</code><br>
例如：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">colors</span> { red , yellow , blue };</span><br></pre></td></tr></tbody></table></figure>
<p>这条语句完成了两项工作：</p>
<ul>
<li>让colors成了一种新的枚举类型的名称，可以用它创建枚举变量。</li>
<li>将red、yellow、blue作为符号常量，默认值是整数的<strong>0、1、2</strong>。</li>
</ul>
<p>注意：</p>
<ul>
<li>用枚举创建的变量取值只能在枚举量范围之内。</li>
<li>枚举的作用域与变量的作用域相同。</li>
<li>可以显式的设置枚举量的值（必须是整数）。<br>
<code>enum colors {red=1,yellow=2,blue=3};</code></li>
<li>可以只显式的指定某些枚举量的值（枚举量的值可以重复）。<br>
<code>enum colors {red=10,yellow,blue};</code></li>
<li>可以将整数强制转换成枚举量，语法：<code>枚举类型(整数)</code></li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">enum</span> <span class="title class_">colors</span> { red=<span class="number">0</span>, yellow=<span class="number">1</span>, blue=<span class="number">2</span>, other=<span class="number">3</span> };    <span class="comment">// 创建枚举类型colors。</span></span><br><span class="line"></span><br><span class="line">	colors cc = yellow;           <span class="comment">// 创建枚举变量，并赋初始值。</span></span><br><span class="line">	<span class="comment">//colors cc = colors(1);           // 创建枚举变量，并赋初始值。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">"red="</span> &lt;&lt; red &lt;&lt; <span class="string">",yellow="</span> &lt;&lt; yellow &lt;&lt; <span class="string">",blue="</span> &lt;&lt; blue &lt;&lt; <span class="string">",other="</span> &lt;&lt; other &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> (cc)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">case</span> red:			cout &lt;&lt; <span class="string">"红色。\n"</span>; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> yellow:	cout &lt;&lt; <span class="string">"黄色。\n"</span>; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> blue:		cout &lt;&lt; <span class="string">"蓝色。\n"</span>; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:			cout &lt;&lt; <span class="string">"未知。\n"</span>; </span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%889%EF%BC%89%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E5%85%B1%E5%90%8C%E4%BD%93%E5%92%8C%E6%9E%9A%E4%B8%BE/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%888%EF%BC%89%E6%95%B0%E7%BB%84/">
                            C++学习笔记（8）数组
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/05
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        <h2 id="一、一维数组的基本概念">一、一维数组的基本概念</h2>
<p>数组是一组数据类型相同的变量，可以存放一组数据。</p>
<ol>
<li><strong>创建数组</strong><br>
声明数组的语法：<code>数据类型 数组名[数组长度];</code><br>
注意：数组长度必须是整数，可以是常量，也可以是变量和表达式。<br>
(C90规定必须用常量表达式指明数组的大小，C99允许使用整型非常量表达式。经测试，在VS中可以用用整型非常量表达式，不能用变量；但是，Linux中还可以用变量。)</li>
<li><strong>数组的使用</strong><br>
语法：<code>数组名[数组下标]</code><br>
注意：
<ul>
<li>数组下标也必须是整数，可以是常量，也可以是变量。</li>
<li>合法的数组下标取值是：0~(数组长度-1)。</li>
</ul>
</li>
<li><strong>数组占用内存的情况</strong><br>
数组在内存中占用的空间是<strong>连续</strong>的。<br>
用<code>sizeof(数组名)</code>可以得到整个数组占用内存空间的大小（只适用于C++基本数据类型）。</li>
<li><strong>数组的初始化</strong><br>
声明的时候初始化：</li>
</ol>
<figure class="highlight dust"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">数据类型 数组名[数组长度] = </span><span class="template-variable">{ 值1，值2，值3, ...... , 值n}</span><span class="language-xml">;</span></span><br><span class="line"><span class="language-xml">数据类型 数组名[ ] = </span><span class="template-variable">{ 值1，值2，值3, ...... , 值n}</span><span class="language-xml">;</span></span><br><span class="line"><span class="language-xml">数据类型 数组名[数组长度] = </span><span class="template-variable">{ 0 }</span><span class="language-xml">;  // 把全部的元素初始化为0。</span></span><br><span class="line"><span class="language-xml">数据类型 数组名[数组长度] = </span><span class="template-variable">{ }</span><span class="language-xml">;    // 把全部的元素初始化为0。</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>注意</strong>：如果{}内不足数组长度个数据，剩余数据用0补全。<br>
C++11标准可以不写等于号。</p>
<ol start="5">
<li><strong>清空数组</strong><br>
用<code>memset()</code>函数可以把数组中全部的元素清零。（只适用于C++基本数据类型）<br>
函数原型：<code>void *memset(void *s, int c, size_t n);</code><br>
注意，在Linux下，使用<code>memcpy()</code>函数需要包含头文件 <code>#include &lt;string.h&gt;</code></li>
<li><strong>复制数组</strong><br>
用<code>memcpy()</code>函数可以把数组中全部的元素复制到另一个相同大小的数组。（只适用于C++基本数据类型）<br>
函数原型：<code>void *memcpy(void *dest, const void *src, size_t n);</code><br>
注意，在Linux下，使用<code>memcpy()</code>函数需要包含头文件<code>#include &lt;string.h&gt;</code><br>
示例：</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh[] = {<span class="number">3</span>, <span class="number">6</span>, <span class="number">1</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">322</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">9</span>};               <span class="comment">// 超女编号。</span></span><br><span class="line">	string name[<span class="number">3</span>];    <span class="comment">// 超女姓名。</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="built_in">sizeof</span>(bh)/<span class="built_in">sizeof</span>(<span class="type">int</span>); ii++)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; <span class="string">"bh["</span>&lt;&lt;ii&lt;&lt;<span class="string">"]="</span> &lt;&lt; bh[ii] &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> bh1[<span class="built_in">sizeof</span>(bh) / <span class="built_in">sizeof</span>(<span class="type">int</span>)];   <span class="comment">// 数组长度必须是整数，可以是常量，也可以是变量和表达式。</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">memcpy</span>(bh1, bh, <span class="built_in">sizeof</span>(bh));      <span class="comment">// 把数组bh中的内容复制到bh1。    </span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="built_in">sizeof</span>(bh1) / <span class="built_in">sizeof</span>(<span class="type">int</span>); ii++)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; <span class="string">"bh1["</span> &lt;&lt; ii &lt;&lt; <span class="string">"]="</span> &lt;&lt; bh1[ii] &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="二、一维数组和指针">二、一维数组和指针</h2>
<ol>
<li>
<p><strong>指针的算术</strong><br>
==将指针变量（地址的值）加1后，增加的量等于它指向的数据类型的字节数。==</p>
</li>
<li>
<p><strong>数组的地址</strong></p>
<ul>
<li>数组在内存中占用的空间是<strong>连续</strong>的。</li>
<li>C++将数组名解释为<strong>数组第0个元素的地址</strong>。</li>
<li>数组第0个元素的地址和<strong>数组首地址</strong>的取值是相同的。</li>
<li>数组第n个元素的地址是：<code>数组首地址+n</code></li>
<li>C++编译器把<code>数组名[下标]</code>解释为 *(数组首地址+下标)</li>
</ul>
</li>
<li>
<p><strong>数组的本质</strong><br>
<u>数组是占用连续空间的一块内存，数组名被解释为数组第0个元素的地址。</u>C++操作这块内存有两种方法：<strong>数组解释法</strong>和<strong>指针表示法</strong>，它们是等价的。</p>
</li>
<li>
<p><strong>数组名不一定会被解释为地址</strong><br>
在多数情况下，C++将数组名解释为数组的第0个元素的地址，但是，==将sizeof运算符用于数据名时，将返回整个数组占用内存空间的字节数。==<br>
<u>可以修改指针的值，但数组名是常量，不可修改。</u></p>
</li>
</ol>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">char</span> a;      cout &lt;&lt; <span class="string">"sizeof(char)="</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">char</span>) &lt;&lt; endl;            <span class="comment">// 1字节</span></span><br><span class="line">	<span class="type">short</span> b;    cout &lt;&lt; <span class="string">"sizeof(short)="</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">short</span>) &lt;&lt; endl;         <span class="comment">// 2字节</span></span><br><span class="line">	<span class="type">int</span> c;         cout &lt;&lt; <span class="string">"sizeof(int)="</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">int</span>) &lt;&lt; endl;                  <span class="comment">// 4字节</span></span><br><span class="line">	<span class="type">double</span> d; cout &lt;&lt; <span class="string">"sizeof(double)="</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">double</span>) &lt;&lt; endl;   <span class="comment">// 8字节</span></span><br><span class="line">		</span><br><span class="line">	cout &lt;&lt; <span class="string">"a的地址是："</span> &lt;&lt; (<span class="type">void</span> *)&amp; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a的地址+1是："</span> &lt;&lt; (<span class="type">void</span>*)( &amp; a + <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"b的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;b &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"b的地址+1是："</span> &lt;&lt; (<span class="type">void</span>*)(&amp;b + <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"c的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;c &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"c的地址+1是："</span> &lt;&lt; (<span class="type">void</span>*)(&amp;c + <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"d的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;d &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"d的地址+1是："</span> &lt;&lt; (<span class="type">void</span>*)(&amp;d + <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">double</span> a[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"a的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>) a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"&amp;a的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>)&amp;a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"a[0]的地址是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>) &amp;a[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[1]的地址是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>) &amp;a[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[2]的地址是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>) &amp;a[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[3]的地址是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>) &amp;a[<span class="number">3</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[4]的地址是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>) &amp;a[<span class="number">4</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span>* p = a;</span><br><span class="line">	cout &lt;&lt; <span class="string">"p的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>)p &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"p+0的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>)(p+  <span class="number">0</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"p+1的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>)(p + <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"p+2的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>)(p + <span class="number">2</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"p+3的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>)(p + <span class="number">3</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"p+4的值是："</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>)(p + <span class="number">4</span>) &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> a[<span class="number">5</span>] = { <span class="number">3</span> , <span class="number">6</span> , <span class="number">5</span> , <span class="number">8</span> , <span class="number">9</span> };</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 用数组表示法操作数组。</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"a[0]的值是："</span> &lt;&lt; a[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[1]的值是："</span> &lt;&lt; a[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[2]的值是："</span> &lt;&lt; a[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[3]的值是："</span> &lt;&lt; a[<span class="number">3</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a[4]的值是："</span> &lt;&lt; a[<span class="number">4</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 用指针表示法操作数组。</span></span><br><span class="line">	<span class="type">int</span>* p = a;</span><br><span class="line">	cout &lt;&lt; <span class="string">"*(p+0)的值是："</span> &lt;&lt; *(p+  <span class="number">0</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"*(p+1)的值是："</span> &lt;&lt; *(p + <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"*(p+2)的值是："</span> &lt;&lt; *(p + <span class="number">2</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"*(p+3)的值是："</span> &lt;&lt; *(p + <span class="number">3</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"*(p+4)的值是："</span> &lt;&lt; *(p + <span class="number">4</span>) &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="三、一维数组用于函数的参数">三、一维数组用于函数的参数</h2>
<ol>
<li><strong>指针的数组表示</strong><br>
在C<ins>内部，用指针来处理数组。<br>
C</ins>编译器把<code>数组名[下标]</code>解释为<code>*(数组首地址+下标)</code><br>
C++编译器把<code>地址[下标]</code>解释为<code>*(地址+下标)</code></li>
<li><strong>一维数组用于函数的参数</strong><br>
<u>一维数组用于函数的参数时，只能传数组的地址，并且必须把数组长度也传进去，除非数组中有最后一个元素的标志。</u><br>
书写方法有两种：</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> len)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>注意：</p>
<ul>
<li>在函数中，可以用数组表示法，也可以用指针表示法。</li>
<li>在函数中，不要对指针名用sizeof运算符，它不是数组名。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">char</span> a[<span class="number">20</span>];             <span class="comment">// 这是一个长度为20的字符型数组。</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* p = (<span class="type">int</span> *)a;        <span class="comment">// 让整型指针p指向数组a的内存。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="number">6</span>; ii++)</span><br><span class="line">	{</span><br><span class="line">		p[ii] = ii + <span class="number">300</span>;     <span class="comment">// 用数组表示法操作指针。</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="number">6</span>; ii++)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; <span class="string">"*(p+"</span> &lt;&lt; ii &lt;&lt; <span class="string">")的值是："</span> &lt;&lt; *(p + ii) &lt;&lt; endl;    <span class="comment">// 地址[下标]  解释为  *(地址+下标)。</span></span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// void func(int *arr,int len)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> arr[],<span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; len; ii++)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; <span class="string">"arr["</span> &lt;&lt; ii &lt;&lt; <span class="string">"]的值是："</span> &lt;&lt; arr[ii] &lt;&lt; endl;              <span class="comment">// 用数组表示法操作指针。</span></span><br><span class="line">		cout &lt;&lt; <span class="string">"*(arr+"</span> &lt;&lt; ii &lt;&lt; <span class="string">")的值是："</span> &lt;&lt; *(arr + ii) &lt;&lt; endl;   <span class="comment">// 地址[下标]  解释为  *(地址+下标)。</span></span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> a[] = {<span class="number">2</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">9</span>};</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">func</span>(a, <span class="built_in">sizeof</span>(a) / <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="四、用new动态创建一维数组">四、用new动态创建一维数组</h2>
<p><u>普通数组在<strong>栈</strong>上分配内存，栈很小；如果需要存放更多的元素，必须在<strong>堆</strong>上分配内存。</u><br>
动态创建一维数组的语法：<code>数据类型 *指针=new 数据类型[数组长度];</code><br>
释放一维数组的语法：<code>delete [] 指针;</code><br>
注意：</p>
<ul>
<li><u>动态创建的数组没有数组名，不能用sizeof运算符。(只有指针名)</u></li>
<li>可以用<strong>数组表示法</strong>和<strong>指针表示法</strong>两种方式使用动态创建的数组。</li>
<li>不要用<code>delete[]</code>释放同一个内存块两次（否则等同于操作野指针）。</li>
<li>对空指针用<code>delete[]</code>是安全的（释放内存后，应该把指针置空nullptr）。</li>
<li>声明普通数组的时候，数组长度可以用<strong>变量</strong>，相当于在栈上动态创建数组，并且不需要释放。</li>
<li><u>如果内存不足，调用new会产生异常，导致程序中止；如果在new关键字后面加<code>(std::nothrow)</code>选项，则返回nullptr，不会产生异常。</u></li>
<li>为什么用<code>delete[]</code>释放数组的时候，不需要指定数组的大小？因为系统会自动跟踪已分配数组的内存。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> *arr=<span class="keyword">new</span> <span class="type">int</span>[<span class="number">8</span>];          <span class="comment">// 创建8个元素的整型数组。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="number">8</span>; ii++)</span><br><span class="line">	{</span><br><span class="line">		arr[ii] = <span class="number">100</span> + ii;                                                                  <span class="comment">// 数组表示法。</span></span><br><span class="line">		cout &lt;&lt; <span class="string">"arr["</span> &lt;&lt; ii &lt;&lt; <span class="string">"]="</span> &lt;&lt; *(arr + ii) &lt;&lt; endl;        <span class="comment">// 指针表示法。</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span>[]arr;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="五、一维数组的排序qsort">五、一维数组的排序qsort</h2>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">函数的原型：</span><br><span class="line">```cpp</span><br><span class="line">void qsort(void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *));</span><br></pre></td></tr></tbody></table></figure>
<p><strong>第一个参数</strong>：数组的起始地址。<br>
<strong>第二个参数</strong>：数组元素的个数（数组长度）。<br>
<strong>第三个参数</strong>：数组元素的大小（sizeof(数组的数据类型)）。<br>
<strong>第四个参数</strong>：回调函数的地址。<br>
回调函数决定了排序的顺序，声明如下：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">compar</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *p1, <span class="type">const</span> <span class="type">void</span> *p2)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>如果函数的返回值&lt; 0 ，那么p1所指向元素会被排在p2所指向元素的前面。</li>
<li>如果函数的返回值==0，那么p1所指向元素与p2所指向元素的顺序不确定。</li>
<li>如果函数的返回值&gt; 0 ，那么p1所指向元素会被排在p2所指向元素的后面。</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">- 形参中的地址用void是为了支持任意数据类型，&lt;u&gt;在回调函数中必须具体化&lt;/u&gt;。</span><br><span class="line">- 为什么需要第三个形参size_t size？</span><br><span class="line">- size_t是C标准库中定义的，在64位系统中是8字节无符号整型（unsigned long long）。</span><br><span class="line">typedef unsigned long long size_t</span><br><span class="line">- 排序的需求除了升序和降序，还有很多不可预知的情况，只能用回调函数。</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">```cpp</span><br><span class="line">#include &lt;iostream&gt;         // 包含头文件。</span><br><span class="line">using namespace std;        // 指定缺省的命名空间。</span><br><span class="line"></span><br><span class="line">int compasc(const void* p1, const void* p2)         // 升序的回调函数。</span><br><span class="line">{</span><br><span class="line">	return *((int*)p1) - *((int*)p2);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">int compdesc(const void* p1, const void* p2)       // 降序的回调函数。</span><br><span class="line">{</span><br><span class="line">	return *((int*)p2) - *((int*)p1);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">{</span><br><span class="line">	int a[8] = { 4,2,7,5,8,6,1,3 };</span><br><span class="line"></span><br><span class="line">	qsort(a,sizeof(a)/sizeof(int),sizeof(int),compasc); // 对数组a进行升序排序。</span><br><span class="line"></span><br><span class="line">	for (int ii = 0; ii &lt; 8; ii++)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; "a[" &lt;&lt; ii &lt;&lt; "]=" &lt;&lt; a[ii] &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	qsort(a, sizeof(a) / sizeof(int), sizeof(int), compdesc); // 对数组a进行降序排序。</span><br><span class="line"></span><br><span class="line">	for (int ii = 0; ii &lt; 8; ii++)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; "a[" &lt;&lt; ii &lt;&lt; "]=" &lt;&lt; a[ii] &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="六、一维数组的查找-折半查找">六、一维数组的查找-折半查找</h2>
<p>折半查找也叫二分查找，<u>只适用于已排序的数组（升序降序都可以）</u>。<br>
示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在arr中查找key，成功返回key在arr中的数组下标，失败返回-1。</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> low = <span class="number">0</span>, high = len<span class="number">-1</span>,mid;          <span class="comment">// 初始化：low=0，high=数组长度-1。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (low &lt;= high)</span><br><span class="line">	{</span><br><span class="line">		mid = (low + high) / <span class="number">2</span>;     <span class="comment">// 计算mid指针的位置。</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (arr[mid] == key) <span class="keyword">return</span> mid;         <span class="comment">// 查找成功。     </span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &gt; key) high = mid - <span class="number">1</span>;  <span class="comment">// 继续在前半区查找。</span></span><br><span class="line">		<span class="keyword">else</span> low = mid + <span class="number">1</span>;                    <span class="comment">// 继续在后半区查找。</span></span><br><span class="line">	</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// 查找失败。</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> a[<span class="number">10</span>] = { <span class="number">7</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">30</span>,<span class="number">35</span>,<span class="number">41</span>,<span class="number">48</span> };    <span class="comment">// 必须是已排好序的数组。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">search</span>(a, <span class="number">10</span>, <span class="number">30</span>) &gt;= <span class="number">0</span>) cout &lt;&lt; <span class="string">"在数组a中查找30成功。\n"</span>;</span><br><span class="line">	<span class="keyword">else</span> cout &lt;&lt; <span class="string">"在数组a中查找30失败。\n"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="七、C风格的字符串">七、C风格的字符串</h2>
<p>C语言约定：如果字符型（char）数组的末尾包含了空字符<code>\0</code>（也就是0），那么该数组中的内容就是一个字符串。<br>
因为字符串需要用0结尾，所以在声明字符数组的时候，要预留多一个字节用来存放0。<br>
<code>char name[21];  // 声明一个存放20个英文字符或十个中文的字符串。</code></p>
<h3 id="1-初始化方法">1. 初始化方法</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> name[<span class="number">11</span>];                 <span class="comment">// 可以存放10个字符，没有初始化，里面是垃圾值。</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">11</span>] = <span class="string">"hello"</span>;         <span class="comment">// 初始内容为hello，系统会自动添加0。</span></span><br><span class="line"><span class="type">char</span> name[]   = { <span class="string">"hello"</span> };      <span class="comment">// 初始内容为hello，系统会自动添加0，数组长度是6。</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">11</span>] = { <span class="string">"hello"</span> };      <span class="comment">// 初始内容为hello，系统会自动添加0。</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">11</span>]   { <span class="string">"hello"</span> };      <span class="comment">// 初始内容为hello，系统会自动添加0。C++11标准。</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">11</span>] = { <span class="number">0</span> };          <span class="comment">// 把全部的元素初始化为0。</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="2-清空字符串">2. 清空字符串</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">memset</span>(name,<span class="number">0</span>,<span class="built_in">sizeof</span>(name));   <span class="comment">// 把全部的元素置为0。</span></span><br><span class="line">name[<span class="number">0</span>]=<span class="number">0</span>;       <span class="comment">// 不规范，有隐患，不推荐。</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="3-字符串复制或赋值strcpy">3. 字符串复制或赋值strcpy()</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strcpy</span><span class="params">(<span class="type">char</span>* dest, <span class="type">const</span> <span class="type">char</span>* src)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>功 能: <strong>将参数src字符串拷贝至参数dest所指的地址</strong>。</li>
<li>返回值: 返回参数dest的字符串起始地址。</li>
<li>复制完字符串后，会在dest后追加0。</li>
<li>如果参数dest所指的内存空间不够大，会导致数组的越界。</li>
</ul>
<h3 id="4-获取字符串的长度strlen">4. 获取字符串的长度strlen()</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">size_t</span>  <span class="title">strlen</span><span class="params">( <span class="type">const</span> <span class="type">char</span>*  str)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>功能：<strong>计算字符串的有效长度，不包含0</strong>。<br>
返回值：返回字符串的字符数。<br>
strlen()函数计算的是字符串的<strong>实际长度，遇到0结束</strong>。</p>
<h3 id="5-字符串拼接strcat-）">5. 字符串拼接strcat(）</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strcat</span><span class="params">(<span class="type">char</span>* dest,<span class="type">const</span> <span class="type">char</span>* src)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>功能：<strong>将src字符串拼接到dest所指的字符串尾部</strong>。<br>
返回值：返回dest字符串起始地址。<br>
dest最后原有的结尾字符0会被覆盖掉，并在连接后的字符串的尾部再增加一个0。<br>
如果参数dest所指的内存空间不够大，会导致数组的越界。</p>
<h3 id="6-字符串拼接strncat">6.字符串拼接strncat()</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strncat</span> <span class="params">(<span class="type">char</span>* dest,<span class="type">const</span> <span class="type">char</span>* src, <span class="type">const</span> <span class="type">size_t</span> n)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>功能：<strong>将src字符串的前n个字符拼接到dest所指的字符串尾部</strong>。<br>
返回值：返回dest字符串的起始地址。<br>
如果n大于等于字符串src的长度，那么将src全部追加到dest的尾部，如果n小于字符串src的长度，只追加src的前n个字符。<br>
strncat会将dest字符串最后的0覆盖掉，字符追加完成后，再追加0。<br>
如果参数dest所指的内存空间不够大，会导致数组的越界。<br>
<em>str### 7. 字符串拼接strncat()<br>
char <em>strncat (char</em> dest,const char</em> src, const size_t n)</p>
<h3 id="7-字符串比较strcmp-和strncmp">7. 字符串比较strcmp()和strncmp()</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">strcmp</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str1, <span class="type">const</span> <span class="type">char</span> *str2 )</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>功能：<strong>比较str1和str2的大小</strong>。<br>
返回值：相等返回0，str1大于str2返回1，str1小于str2返回-1；</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">strncmp</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str1,<span class="type">const</span> <span class="type">char</span> *str2, <span class="type">const</span> <span class="type">size_t</span> n)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>功能：<strong>比较str1和str2前n个字符的大小</strong>。<br>
返回值：相等返回0，str1大于str2返回1，str1小于str2返回-1；</p>
<ul>
<li>两个字符串比较的方法是比较字符的ASCII码的大小，从两个字符串的第一个字符开始，如果分不出大小，就比较第二个字符，如果全部的字符都分不出大小，就返回0，表示两个字符串相等。<br>
在实际开发中，程序员一般只关心字符串是否相等，不关心哪个字符串更大或更小。</li>
</ul>
<h3 id="8-查找字符strchr-和strrchr">8. 查找字符strchr()和strrchr()</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span> *<span class="title">strchr</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s, <span class="type">int</span> c)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong>返回在字符串s中第一次出现c的位置，如果找不到，返回0。</strong></p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span> *<span class="title">strrchr</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s, <span class="type">int</span> c)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong>返回在字符串s中最后一次出现c的位置，如果找不到，返回0。</strong></p>
<h3 id="9-查找字符串strstr">9. 查找字符串strstr()</h3>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strstr</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str,<span class="type">const</span> <span class="type">char</span>* substr)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>功能：<strong>检索子串在字符串中首次出现的位置</strong>。<br>
返回值：返回字符串str中第一次出现子串substr的地址；如果没有检索到子串，则返回0。</p>
<h3 id="10-用于string的表达式">10. 用于string的表达式</h3>
<p>可以把C风格的字符串用于包含了string类型的赋值拼接等表达式中。</p>
<h3 id="11-注意事项">11.注意事项</h3>
<p>a）字符串的结尾标志是0，按照约定，在处理字符串的时候，会从起始位置开始搜索0，一直找下去，找到为止（不会判断数组是否越界）。<br>
b）结尾标志0后面的都是垃圾内容。<br>
c）字符串在每次使用前都要初始化，减少入坑的可能，是每次，不是第一次。<br>
d）不要在子函数中对字符指针用sizeof运算，所以，不能在子函数中对传入的字符串进行初始化，除非字符串的长度也作为参数传入到了子函数中。<br>
e）在VS中，如果要使用C标准的字符串操作函数，要在源代码文件的最上面加</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br></pre></td></tr></tbody></table></figure>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">char</span> name[<span class="number">11</span>];</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(name, <span class="number">0</span>, <span class="built_in">sizeof</span>(name));</span><br><span class="line">	<span class="comment">// name[0] = 0;</span></span><br><span class="line">	<span class="comment">// strcpy(name, "hello");</span></span><br><span class="line">	<span class="built_in">strncpy</span>(name, <span class="string">"hello"</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"name="</span> &lt;&lt; name &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"name[0]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[1]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[2]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[3]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">3</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[4]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">4</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[5]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">5</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[6]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">6</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[7]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">7</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[8]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">8</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[9]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">9</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"name[10]="</span> &lt;&lt; (<span class="type">int</span>)name[<span class="number">10</span>] &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="八、二维数组">八、二维数组</h2>
<p>一维数组的数学概念是线性表，二维数组的数学概念是<strong>矩阵</strong>。</p>
<ol>
<li><strong>创建二维数组</strong><br>
声明二维数组的语法：<code>数据类型 数组名[行数][列数];</code><br>
注意：数组长度必须是整数，可以是常量，也可以是变量和表达式。<br>
C90规定必须用常量表达式指明数组的大小，C99允许使用整型非常量表达式。经测试，在VS中可以用用整型非常量表达式，不能用变量；但是，Linux中还可以用变量。</li>
<li><strong>二维数组的使用</strong><br>
可以通过行下标和列下标访问二维数组中元素，下标从0开始。<br>
语法：<code>数组名[行下标][列下标]</code><br>
注意：
<ul>
<li>二维数组下标也必须是整数，可以是常量，也可以是变量。</li>
<li>合法的行下标取值是：0~(行数-1)。</li>
<li>合法的列下标取值是：0~(列数-1)。</li>
</ul>
</li>
<li><strong>二维数组占用内存的情况</strong><br>
用<code>sizeof(数组名)</code>可以得到整个二维数组占用内存空间的大小（只适用于C++基本数据类型）。<br>
二维数组在内存中占用的空间是<strong>连续</strong>的。</li>
<li><strong>二维数组的初始化</strong><br>
声明的时候初始化：</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">数据类型 数组名[行数][列数] = { {数据<span class="number">1</span>，数据<span class="number">2</span> } ，{数据<span class="number">3</span>，数据<span class="number">4</span> },...... };</span><br><span class="line">数据类型 数组名[行数][列数] = { 数据<span class="number">1</span>，数据<span class="number">2</span>，数据<span class="number">3</span>，数据<span class="number">4</span>, ......};</span><br><span class="line">数据类型 数组名[ ][列数] = { 数据<span class="number">1</span>，数据<span class="number">2</span>，数据<span class="number">3</span>，数据<span class="number">4</span>,......};</span><br><span class="line">数据类型 数组名[行数][列数] = { <span class="number">0</span> };  <span class="comment">// 把全部的元素初始化为0。</span></span><br><span class="line">数据类型 数组名[行数][列数] = { };    <span class="comment">// 把全部的元素初始化为0。</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>注意</strong>：如果{}内不足数组长度个数据，剩余数据用0补全，但是，不建议这么用，你可能在数组中漏了某个值。如果想把数组中全部的元素初始化为0，可以在{}内只填一个0或什么也不填。<br>
C++11标准可以不写等于号。</p>
<ol start="5">
<li><strong>清空二维数组</strong><br>
用<code>memset()</code>函数可以把二维数组中全部的元素清零。（只适用于C++基本数据类型）<br>
函数原型：<code>void *memset(void *s, int c, size_t n);</code><br>
注意，在Linux下，使用memcpy()函数需要包含头文件<code>#include &lt;string.h&gt;</code></li>
<li><strong>复制二维数组</strong><br>
用<code>memcpy()</code>函数可以把二维数组中全部的元素复制到另一个相同大小的数组（没说多少维）。（只适用于C++基本数据类型）<br>
函数原型：<code>void *memcpy(void *dest, const void *src, size_t n);</code><br>
注意，在Linux下，使用<code>memcpy()</code>函数需要包含头文件<code>#include &lt;string.h&gt;</code></li>
</ol>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh[][<span class="number">3</span>] = { <span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span> };</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="number">2</span>; ii++)                 <span class="comment">// 第一层循环表示行数，循环继续的条件是计数器小于行数。</span></span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> jj = <span class="number">0</span>; jj &lt; <span class="number">3</span>; jj++)              <span class="comment">// 第二层循环表示列数，循环继续的条件是计数器小于列数。</span></span><br><span class="line">		{</span><br><span class="line">			cout &lt;&lt; <span class="string">"&amp;bh["</span>&lt;&lt;ii&lt;&lt;<span class="string">"]["</span>&lt;&lt;jj&lt;&lt;<span class="string">"] = "</span> &lt;&lt; (<span class="type">long</span> <span class="type">long</span>) &amp; bh[ii][jj] &lt;&lt; <span class="string">"  "</span>;          <span class="comment">// 处理二维数组的每个元素。</span></span><br><span class="line">		}</span><br><span class="line">		cout &lt;&lt; endl;          <span class="comment">// 每处理一行数据后，输出一个换行。</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* p = (<span class="type">int</span> *)bh;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; <span class="number">6</span>; ii++)</span><br><span class="line">	{</span><br><span class="line">		cout &lt;&lt; <span class="string">"p["</span> &lt;&lt; ii &lt;&lt; <span class="string">"]="</span> &lt;&lt; p[ii] &lt;&lt; endl;     <span class="comment">// 一维数组的数组表示法。</span></span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="九、二维数组用于函数的参数">九、二维数组用于函数的参数</h2>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* p;      <span class="comment">// 整型指针。</span></span><br><span class="line"><span class="type">int</span>* p[<span class="number">3</span>];   <span class="comment">// 一维整型指针数组，元素是3个整型指针（p[0]、p[1]、p[2]）。</span></span><br><span class="line"><span class="function"><span class="type">int</span>* <span class="title">p</span><span class="params">()</span></span>;    <span class="comment">// 函数p的返回值类型是整型的地址。</span></span><br><span class="line"><span class="built_in">int</span> (*p)(<span class="type">int</span> ,<span class="type">int</span>);   <span class="comment">// p是函数指针，函数的返回值是整型。</span></span><br></pre></td></tr></tbody></table></figure>
<ol>
<li><strong>行指针（数组指针）</strong><br>
声明行指针的语法：<code>数据类型 (*行指针名)[行的大小];  // 行的大小即数组长度。</code></li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> (*p1)[<span class="number">3</span>];  <span class="comment">// p1是行指针，用于指向数组长度为3的int型数组。</span></span><br><span class="line"><span class="built_in">int</span> (*p2)[<span class="number">5</span>];  <span class="comment">// p2行指针，用于指向数组长度为5的int型数组。</span></span><br><span class="line"><span class="built_in">double</span> (*p3)[<span class="number">5</span>];  <span class="comment">// p3是行指针，用于指向数组长度为5的double型数组。</span></span><br></pre></td></tr></tbody></table></figure>
<p>一维数组名被解释为<strong>数组第0个元素的地址</strong>。<br>
对一维数组名取地址得到的是数组的地址，是行地址。</p>
<ol start="2">
<li><strong>二维数组名是行地址</strong></li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> bh[<span class="number">2</span>][<span class="number">3</span>] = { {<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>},{<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>} };</span><br><span class="line"><span class="built_in">int</span> (*p)[<span class="number">3</span>]=bh;</span><br></pre></td></tr></tbody></table></figure>
<p>bh是二维数组名，该数组有2个元素，每一个元素本身又是一个数组长度为3的整型数组。<br>
bh被解释为数组长度为3的整型数组类型的行地址。<br>
如果存放bh的值，要用数组长度为3的整型数组类型的行指针。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">int</span> bh[<span class="number">4</span>][<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line"><span class="built_in">int</span> (*p)[<span class="number">2</span>][<span class="number">3</span>]=bh;</span><br></pre></td></tr></tbody></table></figure>
<p>bh是三维数组名，该数组有4元素，每一个元素本身又是一个2行3列的二维数组。<br>
bh被解释为2行3列的二维数组类型的二维地址。<br>
如果存放bh的值，要用2行3列的二维数组类型的二维指针。</p>
<ol start="3">
<li><strong>把二维数组传递给函数</strong><br>
如果要把bh传给函数，函数的声明如下：</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> (*p)[<span class="number">3</span>],<span class="type">int</span> len)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> p[][<span class="number">3</span>],<span class="type">int</span> len)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// void func(int(*p)[3], int len)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> p[][<span class="number">3</span>], <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> ii = <span class="number">0</span>; ii &lt; len; ii++)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> jj = <span class="number">0</span>; jj &lt; <span class="number">3</span>; jj++)</span><br><span class="line">			cout &lt;&lt; <span class="string">"p["</span> &lt;&lt; ii &lt;&lt; <span class="string">"]["</span> &lt;&lt; jj &lt;&lt; <span class="string">"]="</span> &lt;&lt; p[ii][jj] &lt;&lt; <span class="string">"  "</span> ;</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh[<span class="number">2</span>][<span class="number">3</span>] = { {<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>},{<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>} };</span><br><span class="line"></span><br><span class="line">	<span class="built_in">func</span>(bh,<span class="number">2</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> (*p)[<span class="number">2</span>][<span class="number">3</span>])</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> ii = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// 遍历三维数组p，给它的每个元素赋值。</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> a = <span class="number">0</span>; a &lt; <span class="number">4</span>; a++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> b = <span class="number">0</span>; b &lt; <span class="number">2</span>; b++)</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt; <span class="number">3</span>; c++)</span><br><span class="line">				p[a][b][c] = ii++;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh[<span class="number">4</span>][<span class="number">2</span>][<span class="number">3</span>];        <span class="comment">// 假设有4个超女方阵，每个方阵有2行，每行有3个超女。</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(bh, <span class="number">0</span>, <span class="built_in">sizeof</span>(bh));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">func</span>(bh);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> a = <span class="number">0</span>; a &lt; <span class="number">4</span>; a++)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> b = <span class="number">0</span>; b &lt; <span class="number">2</span>; b++)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt; <span class="number">3</span>; c++)</span><br><span class="line">				cout &lt;&lt; bh[a][b][c] &lt;&lt;<span class="string">"\t"</span>;</span><br><span class="line"></span><br><span class="line">			cout &lt;&lt; endl;    <span class="comment">// 每显示一行后，输出一个换行符。</span></span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; endl&lt;&lt;endl;    <span class="comment">// 每显示一个方阵后，输出两个换行符。</span></span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%888%EF%BC%89%E6%95%B0%E7%BB%84/">阅读更多</a>
                </button>
            </div>
        
            
            
                <hr>
            
            <div class="article-item"> 
                <div class="article-item-title">
                    <h1>
                        <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%887%EF%BC%89%E6%8C%87%E9%92%88%E5%92%8C%E5%86%85%E5%AD%98/">
                            C++学习笔记（7）指针和内存
                        </a>
                    </h1>
                    <div class="info">
                        
                        
                            <span>
                                2024/01/05
                            </span>
                        
                    </div>
                </div>
                <div class="article-item-excerpt article">
                    <div>
                        <h2 id="一、指针的基本概念">一、指针的基本概念</h2>
<h3 id="1）变量的地址">1）变量的地址</h3>
<p>变量是内存变量的简称，在C++中，每定义一个变量，系统就会给变量分配一块内存，内存是有地址的。</p>
<p>C++用运算符<code>&amp;</code>获取变量在内存中的<strong>起始地址</strong>。<br>
语法：<code>&amp;变量名</code></p>
<h3 id="2）指针变量">2）指针变量</h3>
<p>指针变量简称指针，它是一种特殊的变量，专用于<strong>存放变量在内存中的起始地址</strong>。<br>
语法：<code>数据类型 *变量名;</code><br>
数据类型必须是合法的C++数据类型（int、char、double或其它<strong>自定义</strong>的数据类型）。</p>
<h3 id="3）对指针赋值">3）对指针赋值</h3>
<p>变量的地址都是一个<strong>十六进制数</strong>。<br>
指针的数据类型要与变量一致。<br>
语法：<code>指针=&amp;变量名;</code><br>
注意</p>
<ul>
<li>对指针的赋值操作也通俗的被称为“指向某变量”，被指向的变量的数据类型称为“基类型”。</li>
<li>如果指针的数据类型与基类型不符，编译会出现警告。但是，可以强制转换它们的类型。</li>
</ul>
<h3 id="4）指针占用的内存">4）指针占用的内存</h3>
<ul>
<li>在64位的操作系统中，不管是什么类型的指针，占用的内存都是<strong>8字节</strong>。</li>
<li>在C++中，指针是复合数据类型，复合数据类型是指基于其它类型而定义的数据类型。</li>
</ul>
<h2 id="二、使用指针">二、使用指针</h2>
<ul>
<li>指针存放变量的地址，因此，<strong>指针名表示的是地址</strong>（就像变量名可以表示变量的值一样）。</li>
<li><code>*</code>运算符被称为间接值或<strong>解除引用</strong>（解引用）运算符，将它用于指针，可以得到该地址的内存中存储的值。</li>
</ul>
<p>例如：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> no = <span class="number">38</span>;</span><br><span class="line"><span class="type">int</span>* ptr = &amp;no;</span><br></pre></td></tr></tbody></table></figure>
<p>其中<code>no</code>和<code>*ptr</code>一样，都是整数；<code>&amp;no</code>和<code>ptr</code>一样，都是地址。</p>
<p>程序在存储数据的时候，必须跟踪三种基本属性：</p>
<ul>
<li>数据存储在哪里 <strong>（地址）</strong>；</li>
<li>数据是什么类型 <strong>（数据类型）</strong>；</li>
<li>数据的值是多少 <strong>（值）</strong>。</li>
</ul>
<p>用两种策略可以达到以上目的：</p>
<ol>
<li>声明一个普通变量，声明时指出数据类型和变量名（符号名），系统在内部跟踪该内存单元。</li>
<li>声明一个指针变量，存储的值是地址，而不是值本身，程序直接访问该内存单元。</li>
</ol>
<h2 id="三、指针用于函数的参数">三、指针用于函数的参数</h2>
<p>==如果把函数的形参声明为指针，调用的时候把实参的地址传进去，形参中存放的是实参的地址，在函数中通过解引用的方法直接操作内存中的数据，可以修改实数的值，这种方法被通俗的称为<strong>地址传递</strong>或<strong>传地址</strong>。==<br>
<strong>值传递</strong>：函数的形参是普通变量。<br>
传地址的意义如下：</p>
<ul>
<li>==可以在函数中修改实参的值（值传递在函数中不能修改实参的值）。==</li>
<li>减少内存拷贝，提升性能。<br>
例如：</li>
</ul>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span>* no, string* str)</span>    <span class="comment">// 向超女表白的函数。 </span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; *no &lt;&lt; <span class="string">"号："</span> &lt;&lt; *str &lt;&lt; endl;</span><br><span class="line">	*no = <span class="number">8</span>;</span><br><span class="line">	*str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh = <span class="number">3</span>;      <span class="comment">// 超女的编号。</span></span><br><span class="line">	string message = <span class="string">"我是一只傻傻鸟。"</span>;          <span class="comment">// 向超女表白的内容。</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">func</span>(&amp;bh, &amp;message);            <span class="comment">// 调用向超女表白的函数。</span></span><br><span class="line">    <span class="comment">//bh和message被更改</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; bh &lt;&lt; <span class="string">"号："</span> &lt;&lt; message &lt;&lt; endl；</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="四、用const修饰指针">四、用const修饰指针</h2>
<h3 id="1）常量指针">1）常量指针</h3>
<p>语法：<code>const 数据类型* 变量名;</code><br>
==不能通过解引用的方法修改内存地址中的值（用原始的变量名是可以修改的）。==<br>
注意：</p>
<ul>
<li>指向的变量（对象）可以改变（之前是指向变量a的，后来可以改为指向变量b）。</li>
<li>一般用于修饰函数的形参，表示不希望在函数里修改内存地址中的值。</li>
<li>如果用于形参，虽然指向的对象可以改变，但这么做没有任何意义。</li>
<li>如果形参的值不需要改变，建议加上const修饰，程序可读性更好。</li>
</ul>
<h3 id="2）指针常量">2）指针常量</h3>
<p>语法：<code>数据类型 * const 变量名;</code><br>
==指向的变量（对象）不可改变。==<br>
注意：</p>
<ul>
<li>在定义的同时必须初始化，否则没有意义。</li>
<li>可以通过解引用的方法修改内存地址中的值。</li>
<li>C++编译器把指针常量做了一些特别的处理，改头换面之后，有一个新的名字，叫<strong>引用</strong>。</li>
</ul>
<h3 id="3）常指针常量">3）常指针常量</h3>
<p>语法：<code>const 数据类型 * const 变量名;</code><br>
==指向的变量（对象）不可改变，不能通过解引用的方法修改内存地址中的值。==</p>
<h3 id="总结">总结</h3>
<p><strong>常量指针</strong>：指针指向可以改，指针指向的值不可以更改。<br>
<strong>指针常量</strong>：指针指向不可以改，指针指向的值可以更改。<br>
<strong>常指针常量</strong>：指针指向不可以改，指针指向的值不可以更改。<br>
<strong>记忆秘诀</strong>：*表示指针，指针在前先读指针；指针在前指针就不允许改变。<br>
<strong>常量指针</strong>：<code>const 数据类型 *变量名</code><br>
<strong>指针常量</strong>：<code>数据类型 * const 变量名</code></p>
<p>例如：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">const</span> <span class="type">int</span> *no, <span class="type">const</span> string *str)</span>    <span class="comment">// 向超女表白的函数。 </span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// *no = 8;</span></span><br><span class="line">	<span class="comment">// *str = "我有一只小小鸟。";//通过解引用改变形参，会报错</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; *no &lt;&lt; <span class="string">"号："</span> &lt;&lt; *str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>, b = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* <span class="type">const</span> p=&amp;a;</span><br><span class="line">	*p = <span class="number">13</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"a="</span> &lt;&lt; a &lt;&lt; <span class="string">",*p="</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    p = &amp;b;</span></span><br><span class="line"><span class="comment">	cout &lt;&lt; "b=" &lt;&lt; b &lt;&lt; ",*p=" &lt;&lt; *p &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">    */</span>指针常量指向的对象不能改变</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1>五、void关键字</h1>
<p>在C++中，void表示为无类型，主要有三个用途：</p>
<ul>
<li>1）函数的返回值用void，表示函数没有返回值。</li>
</ul>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// 函数体代码。</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>2）函数的参数填void，表示函数不需要参数（或者让参数列表空着）。</li>
</ul>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// 函数体代码。</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>3）==函数的形参用void *，表示接受任意数据类型的指针。==</li>
</ul>
<p>注意：</p>
<ul>
<li>不能用void声明变量，它不能代表一个真实的变量，但是，用void *可以。</li>
<li>==不能对void *指针直接解引用（需要转换成其它类型的指针）。==</li>
<li>==把其它类型的指针赋值给void*指针不需要转换。==</li>
<li>==把void *指针赋值给把其它类型的指针需要转换。==</li>
</ul>
<p>例如：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只关心地址本身，不关心里面的内容，用void *可以存放任意类型的地址。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示变量的十六进制地址的函数：varname-变量名，p-变量的地址。</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(string varname, <span class="type">void</span>* p)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; varname&lt;&lt; <span class="string">"的地址是："</span> &lt;&lt; p &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; varname &lt;&lt; <span class="string">"的值是："</span> &lt;&lt; *(<span class="type">char</span> *)p &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span>  a=<span class="number">89</span>;</span><br><span class="line">	<span class="type">char</span> b=<span class="string">'X'</span>;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">"a的地址是："</span> &lt;&lt;  &amp;a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"b的地址是："</span> &lt;&lt;  &amp;b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">func</span>(<span class="string">"a"</span>, &amp;a);</span><br><span class="line">	<span class="built_in">func</span>(<span class="string">"b"</span>, &amp;b);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="六、C-内存模型">六、C++内存模型</h2>
<p>在 C++ 中，程序运行时，内存主要分成四个区，分别是<strong>栈</strong>、<strong>堆</strong>、<strong>数据段</strong>和<strong>代码段</strong>。</p>
<ul>
<li><strong>栈</strong>：存储<strong>局部变量</strong>、<strong>函数参数</strong>和<strong>返回值</strong>。</li>
<li><strong>堆</strong>：存储<strong>动态开辟内存</strong>的变量。</li>
<li><strong>数据段</strong>：存储<strong>全局变量</strong>和<strong>静态变量</strong>。</li>
<li><strong>代码段</strong>：存储可执行程序的<strong>代码</strong>和<strong>常量（例如字符常量）</strong>，此存储区<strong>不可修改</strong>。</li>
</ul>
<p><strong>栈和堆的主要区别：</strong></p>
<ol>
<li><strong>管理方式不同</strong>：栈是系统自动管理的，在出作用域时，将自动被释放；堆需手动释放，若程序中不释放，程序结束时由操作系统回收。</li>
<li><strong>空间大小不同</strong>：堆内存的大小受限于物理内存空间；而栈就小得可怜，一般只有8M（可以修改系统参数)。</li>
<li><strong>分配方式不同</strong>：堆是动态分配；栈有静态分配和动态分配（都是自动释放）。</li>
<li><strong>分配效率不同</strong>：栈是系统提供的数据结构，计算机在底层提供了对栈的支持，进栈和出栈有专门的指令，效率比较高；堆是由C++函数库提供的。</li>
<li><strong>是否产生碎片</strong>：对于栈来说，进栈和出栈都有着严格的顺序（先进后出），不会产生碎片；而堆频繁的分配和释放，会造成内存空间的不连续，容易产生碎片，太多的碎片会导致性能的下降。</li>
<li><strong>增长方向不同</strong>：栈向下增长，以降序分配内存地址；堆向上增长，以升序分配内存地址。</li>
</ol>
<h2 id="七、动态分配内存new和delete">七、动态分配内存new和delete</h2>
<p>使用堆区的内存有四个步骤：</p>
<ol>
<li>声明一个指针；</li>
<li>用new运算符向系统申请一块内存，让指针指向这块内存；</li>
<li>通过对指针解引用的方法，像使用变量一样使用这块内存；</li>
<li>如果这块内存不用了，用delete运算符释放它。</li>
</ol>
<p>申请内存的语法：<code>new 数据类型(初始值);   // C++11支持{}</code><br>
如果申请成功，<strong>返回一个地址</strong>；如果申请失败，返回一个空地址（暂时不考虑失败的情况）。<br>
释放内存的语法：<code>delete 地址;</code><br>
释放内存不会失败（还钱不会失败）。<br>
注意：</p>
<ul>
<li>动态分配出来的内存<strong>没有变量名</strong>，只能通过指向它的指针来操作内存中的数据。</li>
<li>如果动态分配的内存不用了，必须用delete释放它，否则有可能用尽系统的内存。</li>
<li>动态分配的内存生命周期与程序相同，程序退出时，如果没有释放，系统将自动回收。</li>
<li>就算指针的作用域已失效，所指向的内存也不会释放。</li>
<li>用指针跟踪已分配的内存时，不能跟丢。<br>
示例：</li>
</ul>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span>* p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">5</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">"*p="</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">	*p = <span class="number">8</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"*p="</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">delete</span> p;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="八、二级指针">八、二级指针</h2>
<p>二级指针用于<strong>存放指针变量的地址。</strong></p>
<ul>
<li>声明二级指针的语法：<code>数据类型** 指针名;</code></li>
<li>使用指针有两个目的：1）传递地址；2）存放动态分配的内存的地址。</li>
<li>在函数中，如果传递普通变量的地址，形参用指针；传递指针的地址，形参用二级指针。</li>
<li>把普通变量的地址传入函数后可以在函数中修改变量的值；把指针的地址传入函数后可以在函数中修改指针的值。</li>
</ul>
<p>例如：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span>** pp)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	* pp = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">3</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">"pp="</span> &lt;&lt; pp &lt;&lt; <span class="string">",*pp="</span> &lt;&lt; *pp &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span>* p=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">func</span>(&amp;p);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"p="</span> &lt;&lt; p &lt;&lt; <span class="string">",*p="</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="九、空指针">九、空指针</h2>
<p>在C和C++中，用0或NULL都可以表示空指针。<br>
声明指针后，在赋值之前，让它指向空，表示<strong>没有指向任何地址</strong>。</p>
<h3 id="使用空指针的后果">使用空指针的后果</h3>
<ul>
<li>如果对空指针解引用，程序会崩溃。</li>
<li>如果对空指针使用delete运算符，系统将忽略该操作，不会出现异常。所以，<strong>内存被释放后，也应该把指针指向空</strong>。</li>
<li>在函数中，应该有<strong>判断形参是否为空指针</strong>的代码，目的是保证程序的健壮性。</li>
</ul>
<h3 id="为什么空指针访问会出现异常？">为什么空指针访问会出现异常？</h3>
<p>NULL指针分配的分区：其范围是从 0x00000000到0x0000FFFF。这段空间是空闲的，对于空闲的空间而言，没有相应的物理存储器与之相对应，所以对这段空间来说，任何读写操作都是会引起异常的。空指针是程序无论在何时都没有物理存储器与之对应的地址。为了保障“无论何时”这个条件，需要人为划分一个空指针的区域，固有上面NULL指针分区。</p>
<h2 id="十、C-11的nullptr">十、C++11的nullptr</h2>
<p>用0和NULL表示空指针会产生歧义，C<ins>11建议<strong>用nullptr表示空指针</strong>，也就是<code>(void *)0</code>。<br>
NULL在C</ins>中就是0，这是因为在C<ins>中void* 类型是不允许隐式转换成其他类型的，所以之前C</ins>中用0来代表空指针，但是在重载整形的情况下，会出现上述的问题。所以，C++11加入了nullptr，可以保证在任何情况下都代表空指针，而不会出现上述的情况，因此，建议用nullptr替代NULL吧，而NULL就当做0使用。<br>
注意：在Linux平台下，如果使用nullptr，编译需要加<code>-std=c++11</code>参数。<br>
示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span>* no, string* str)</span>    <span class="comment">// 向超女表白的函数。 </span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> ((no == <span class="number">0</span>) || (str == <span class="number">0</span>)) <span class="keyword">return</span>;  </span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; *no &lt;&lt; <span class="string">"号："</span> &lt;&lt; *str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span>* bh = <span class="number">0</span>;   <span class="comment">//  new int(3);</span></span><br><span class="line">	string* message = <span class="number">0</span>; <span class="comment">//  new string("我是一只傻傻鸟。");</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">func</span>(bh,message);            <span class="comment">// 调用向超女表白的函数。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> bh; <span class="keyword">delete</span> message;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="十一、野指针">十一、野指针</h2>
<p>野指针就是<strong>指针指向的不是一个有效（合法）的地址</strong>。<br>
在程序中，如果访问野指针，可能会造成程序的崩溃。</p>
<p><strong>出现野指针的情况主要有三种</strong>：</p>
<ol>
<li>指针在定义的时候，如果<strong>没有进行初始化</strong>，它的值是不确定的（乱指一气）。</li>
<li>如果用指针指向了<strong>动态分配的内存</strong>，内存<strong>被释放</strong>后，指针不会置空，但是，指向的<strong>地址已失效</strong>。</li>
<li>指针指向的变量已<strong>超越变量的作用域</strong>（变量的内存空间已被系统回收），让指针指向了函数的局部变量，或者把函数的局部变量的地址作为返回值赋给了指针。</li>
</ol>
<p><strong>规避方法</strong>:</p>
<ol>
<li>指针在定义的时候，如果没地方指，就初始化为<code>nullptr</code>。</li>
<li>动态分配的内存被释放后，将其置为<code>nullptr</code>。</li>
<li>函数不要返回局部变量的地址。</li>
</ol>
<p><strong>注意</strong>：野指针的危害比空指针要大很多，在程序中，如果访问野指针，可能会造成程序的崩溃。</p>
<h2 id="十二、函数指针">十二、函数指针</h2>
<p>函数的二进制代码存放在内存四区中的代码段，<strong>函数的地址是它在内存中的起始地址</strong>。如果把函数的地址作为参数传递给函数，就可以在函数中灵活的调用其它函数。<br>
<strong>使用函数指针的三个步骤</strong>：</p>
<ol>
<li>声明函数指针；</li>
<li>让函数指针指向函数的地址；</li>
<li>通过函数指针调用函数。</li>
</ol>
<p><strong>1）声明函数指针</strong><br>
声明函数指针时，必须提供函数类型，函数的类型是指<strong>返回值</strong>和<strong>参数列表</strong>（函数名和形参名不是）<br>
假设函数的原型是：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> bh,string str)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> no,string message)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func3</span><span class="params">(<span class="type">int</span> id,string info)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">func4</span><span class="params">(<span class="type">int</span> id,string info)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">func5</span><span class="params">(<span class="type">int</span> id)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>则函数指针的声明是：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>  (*pfa)(<span class="type">int</span>,string);</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> (*pfb)(<span class="type">int</span>,string);</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> (*pfc)(<span class="type">int</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>pfa、pfb、pfc是函数指针名，必须用括号，否则就成了返回指针的函数。<br>
<strong>2）函数指针的赋值</strong><br>
==函数名就是函数的地址。==<br>
函数指针的赋值：<code>函数指针名=函数名;</code><br>
<strong>3）函数指针的调用</strong></p>
<figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(*函数指针名)</span><span class="comment">(实参)</span>;</span><br><span class="line">函数指针名<span class="comment">(实参)</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>示例1：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> no, string str)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh = <span class="number">3</span>;                                                 <span class="comment">// 超女的编号。</span></span><br><span class="line">	string message = <span class="string">"我是一只傻傻鸟。"</span>;    <span class="comment">// 向超女表白的内容。</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">func</span>(bh, message);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">void</span> (*pfunc)(<span class="type">int</span>, string);           <span class="comment">// 声明表白函数的函数指针。</span></span><br><span class="line">	pfunc = func;                              <span class="comment">// 对函数指针赋值，语法是函数指针名=函数名。</span></span><br><span class="line">	<span class="built_in">pfunc</span>(bh, message);                  <span class="comment">// 用函数指针名调用函数。 C++</span></span><br><span class="line">	(*pfunc)(bh, message);              <span class="comment">// 用函数指针名调用函数。 C语言</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>示例2：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">zs</span><span class="params">(<span class="type">int</span> a)</span>         <span class="comment">// 张三的个性化表白函数。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout  &lt;&lt;<span class="string">"a="</span> &lt;&lt; a &lt;&lt; <span class="string">"我要先翻三个跟斗再表白。\n"</span>;   <span class="comment">// 个性化表白的代码。</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ls</span><span class="params">(<span class="type">int</span> a)</span>         <span class="comment">// 李四的个性化表白函数。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"a="</span> &lt;&lt; a &lt;&lt; <span class="string">"我有一只小小鸟。\n"</span>;   <span class="comment">// 个性化表白的代码。</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">void</span> (*pf)(<span class="type">int</span>),<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"表白之前的准备工作已完成。\n"</span>;       <span class="comment">// 表白之前的准备工作。</span></span><br><span class="line">	<span class="built_in">pf</span>(b);                                                                     <span class="comment">// 用函数指针名调用个性化表白函数。</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"表白之后的收尾工作已完成。\n"</span>;       <span class="comment">// 表白之后的收尾工作。</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="built_in">show</span>(zs, <span class="number">3</span>);          <span class="comment">// 张三要表白。</span></span><br><span class="line">	<span class="built_in">show</span>(ls, <span class="number">4</span>);          <span class="comment">// 李四要表白。</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

                    </div>
                </div>
            </div>

            <div style="text-align: right;">
                <button type="button" class="read-more">
                    <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%887%EF%BC%89%E6%8C%87%E9%92%88%E5%92%8C%E5%86%85%E5%AD%98/">阅读更多</a>
                </button>
            </div>
        
    </div>

    <div class="pagination">
    <div class="paginator">
        <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-caret-left" aria-hidden="true"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-caret-right" aria-hidden="true"></i></a>
    </div>
    <div class="paginator-info">
        <span class="gray">39 articles in total</span>
    </div>
</div>
</article>

            <section class="article-bottom flex-between">
                <div class="flex-center">
                    <img src="/imgs/logo.png" class="logo">
                    <span>保持好奇</span>
                </div>
                <div class="flex-center">
                    <a href="mailto:22232025@zju.edu.cn">
                        <span title="envelope">
                            <i class="fa fa-envelope" aria-hidden="true"></i>
                        </span>
                    </a>
                    <a target="_blank" rel="noopener" href="https://github.com/can-dy-jack/hexo-theme-delicate">
                        <span title="github" style="font-size: 18px;">
                            <i class="fa fa-github" aria-hidden="true"></i>
                        </span>
                    </a>
                </div>
            </section>
        </div>
    </main>

    <div class="to-top">
    <a href="javascript: void(0)" onclick="delicate.toTop()">
        <i class="fa fa-chevron-up" aria-hidden="true"></i>
    </a>
</div>

    <footer>
        <div class="footer-info gray">
    <div>
        <span><a target="_blank" rel="noopener" href="https://github.com/can-dy-jack/hexo-theme-delicate">Delicate</a> theme designed with ❤️ by <a target="_blank" rel="noopener" href="https://github.com/can-dy-jack">can-dy-jack</a></span>
    </div>
    <div>
        <span>Copyright Ⓒ 2024. All rights reserved.</span>
    </div>
</div>
    </footer>

    


<script src="/js/index.js"></script>


</body>

</html>