<!DOCTYPE html>

<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>锐哥的个人空间 | C++学习笔记（12）类与对象</title>

    
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="锐哥">

    <meta name="color-scheme" content="light dark">

    
    
<link rel="stylesheet" href="/styles/index.css">

    
    <link rel="shortcut icon" href="/imgs/logo.png">

    
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.8.0/styles/base16/solarized-light.css">
    

    
<meta name="generator" content="Hexo 7.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body id="delicate-app">
    <main>
        <div class="container">
            <section class="page-top-badge flex-between w100">
                <div>
                    <a href="/">
                        <span title="github"><i class="fa fa-home" aria-hidden="true"></i></span>
                    </a>
                </div>
                <!-- <div>
                    
                </div> -->
            </section>
            <aside class="toc-container">
    <!-- sticky toc -->
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E6%88%90-%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">一、面向对象编成-对象和类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BB%8E%E7%BB%93%E6%9E%84%E4%BD%93%E5%88%B0%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">二、从结构体到类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%B1%BB%E7%9A%84%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="toc-number">3.</span> <span class="toc-text">三、类的访问权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">四、简单使用类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">五、构造函数和析构函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">5.1.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">5.2.</span> <span class="toc-text">析构函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-number">5.3.</span> <span class="toc-text">注意：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">六、拷贝构造函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">7.</span> <span class="toc-text">七、浅拷贝和深拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8"><span class="toc-number">8.</span> <span class="toc-text">八、初始化列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81const%E4%BF%AE%E9%A5%B0%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">9.</span> <span class="toc-text">九、const修饰成员函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81this%E6%8C%87%E9%92%88"><span class="toc-number">10.</span> <span class="toc-text">十、this指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="toc-number">11.</span> <span class="toc-text">十一、静态成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">12.</span> <span class="toc-text">十二、简单对象模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E5%8F%8B%E5%85%83"><span class="toc-number">13.</span> <span class="toc-text">十三、友元</span></a></li></ol>
</aside>

<article class="markdown-container">
    <section>
        <h1>
            <span>
                C++学习笔记（12）类与对象
            </span>
        
            <div class="post-info">
                <span></span>
                <span>
                    79k字 • 
                    159分钟
                </span>
            </div>
        </h1>
    </section>

    <section class="article">
        <h2 id="一、面向对象编成-对象和类">一、面向对象编成-对象和类</h2>
<ul>
<li>抽象</li>
<li>封装和数据隐藏</li>
<li>多台</li>
<li>继承</li>
<li>代码重用</li>
</ul>
<p><u><em><strong>没有对象？学C++可以直接创建一百个！</strong></em></u></p>
<h2 id="二、从结构体到类">二、从结构体到类</h2>
<p>结构体里面加上<strong>成员函数</strong>，就变成了<strong>类</strong>。<br>
对面向对象编程来说，<u>一切都是对象</u>，对象用类来描述。<br>
==类把对象的数据和操作数据的方法作为一个整体考虑。==</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">定义类的语法：</span><br><span class="line"><span class="keyword">class</span> 类名</span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">成员一的数据类型  成员名一;</span><br><span class="line">成员二的数据类型  成员名二;</span><br><span class="line">成员三的数据类型  成员名三;</span><br><span class="line">......</span><br><span class="line">成员n的数据类型  成员名n;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>注意：</p>
<ul>
<li>类的成员可以是<strong>变量</strong>，也可以是*函数**。</li>
<li>类的<strong>成员变量</strong>也叫<strong>属性</strong>。</li>
<li>类的<strong>成员函数</strong>也叫<strong>方法/行为</strong>，类的成员函数<u>可以定义在类的外面</u>。</li>
<li>用类定义一个类的变量叫创建（或实例化）一个对象。</li>
<li>对象的成员变量和成员函数的作用域和生命周期与对象的作用域和生命周期相同。</li>
</ul>
<p>例如：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    name;          <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="type">int</span>         age;             <span class="comment">// 年龄。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setvalue</span><span class="params">(string name1, <span class="type">int</span> age1)</span></span>;    <span class="comment">// 设置成员变量的值。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span>    <span class="comment">// 显示超女的自我介绍。</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CGirl::setvalue</span><span class="params">(string name1, <span class="type">int</span> age1)</span>    <span class="comment">// 设置成员变量的值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    name = name1;     age = age1;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    CGirl girl;       <span class="comment">// 创建超女对象。</span></span><br><span class="line">    girl.<span class="built_in">setvalue</span>(<span class="string">"西施"</span>, <span class="number">26</span>);     <span class="comment">// 设置成员变量的值。</span></span><br><span class="line">    girl.<span class="built_in">show</span>();    <span class="comment">// 显示超女的自我介绍。</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="三、类的访问权限">三、类的访问权限</h2>
<p>类的成员有三种访问权限：<code>public</code>、<code>private</code>和<code>protected</code>，分别表示公有的、私有的和受保护的。</p>
<ul>
<li>在类的内部（类的成员函数中），无论成员被声明为 public还是private，都可以访问。</li>
<li><u>在类的<strong>外部</strong>（定义类的代码之外），<strong>只能访问public成员</strong>，不能访问 private、protected成员。</u></li>
<li>在一个类体的定义中，private 和 public 可以出现多次。</li>
<li>结构体的成员缺省为public，<strong>类的成员缺省为private</strong>。</li>
<li>private的意义在于<strong>隐藏类的数据和实现</strong>，把需要向外暴露的成员声明为public。</li>
</ul>
<h2 id="四、简单使用类">四、简单使用类</h2>
<ol>
<li>类的成员函数可以直接访问该类其它的成员函数（可以<strong>递归</strong>）。</li>
<li>类的成员函数可以<strong>重载</strong>，可以使用默认参数。</li>
<li>类指针的用法与结构体指针用法相同。</li>
<li>类的成员可以是任意数据类型（类中枚举）。</li>
<li>可以为类的成员指定缺省值（C++11标准）。</li>
<li>类可以创建<strong>对象数组</strong>，就像结构体数组一样。</li>
<li>对象可以作为实参传递给函数，一般传<strong>引用</strong>。</li>
<li>可以用<code>new</code>动态创建对象，用<code>delete</code>释放对象。</li>
<li>在类的外部，一般不直接访问（读和写）对象的成员，而是用成员函数。==数据隐藏是面向对象编程的思想之一==。</li>
<li>对象一般不用<code>memset()</code>清空成员变量，可以写一个专用于清空成员变量的成员函数。</li>
<li>对类和对象用<code>sizeof</code>运算意义不大，一般不用。</li>
<li>用结构体描述纯粹的数据，用类描述对象。</li>
<li>在类的声明中定义的函数都将自动成为<strong>内联函数</strong>；在类的声明之外定义的函数如果使用了<code>inline</code>限定符，也是内联函数。</li>
<li>为了区分类的成员变量和成员函数的形参，把成员变量名加m_前缀或_后缀，如m_name或name_。</li>
<li>类的分文件编写。</li>
</ol>
<h2 id="五、构造函数和析构函数">五、构造函数和析构函数</h2>
<ul>
<li><strong>构造函数</strong>：在创建对象时，自动的进行初始化工作。</li>
<li><strong>析构函数</strong>：在销毁对象前，自动的完成清理工作。</li>
</ul>
<h3 id="构造函数">构造函数</h3>
<p>语法：<code>类名(){......}</code></p>
<ul>
<li>访问权限必须是<code>public</code>。</li>
<li><strong>函数名必须与类名相同</strong>。</li>
<li><strong>没有返回值，不写void</strong>。</li>
<li>可以有参数，可以重载，可以有默认参数。</li>
<li>创建对象时只会自动调用一次，<strong>不能手工调用</strong>。</li>
</ul>
<h3 id="析构函数">析构函数</h3>
<p>语法：<code>~类名(){......}</code></p>
<ul>
<li>访问权限必须是<code>public</code>。</li>
<li>没有返回值，也不写void。</li>
<li>没有参数，不能重载。</li>
<li>销毁对象前只会<strong>自动调用一次</strong>，但是<strong>可以手工调用</strong>。</li>
</ul>
<h3 id="注意：">注意：</h3>
<ol>
<li>如果没有提供构造/析构函数，编译器将提供空实现的构造/析构函数。</li>
<li>如果提供了构造/析构函数，编译器将不提供空实现的构造/析构函数。</li>
<li>创建对象的时候，如果重载了构造函数，编译器根据实参匹配相应的构造函数。没有参数的构造函数也叫默认构造函数。</li>
<li><u>创建对象的时候不要在对象名后面加空的圆括号，编译器误认为是声明函数。（如果没有构造函数、构造函数没有参数、构造函数的参数都有默认参数）。</u></li>
<li><strong>在构造函数名后面加括号和参数不是调用构造函数，是创建匿名对象。</strong>(<em>如果在构造函数中初始化指针，却没有调用，成为了野指针，析构函数对指针的delete可能会让程序崩溃</em>)</li>
<li>接受一个参数的构造函数允许使用赋值语法将对象初始化为一个值（可能会导致问题，不推荐）。</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGirl girl =<span class="number">10</span>;</span><br></pre></td></tr></tbody></table></figure>
<ol start="7">
<li>以下两行代码有本质的区别：</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGirl girl = <span class="built_in">CGirl</span>(<span class="string">"西施"</span><span class="number">20</span>);  <span class="comment">// 显式创建对象。</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CGirl girl;                   <span class="comment">// 创建对象。</span></span><br><span class="line">girl = <span class="built_in">CGirl</span>(<span class="string">"西施"</span><span class="number">20</span>);        <span class="comment">// 创建临时对象，然后给现有的对象赋值。一佛嗯</span></span><br></pre></td></tr></tbody></table></figure>
<ol start="8">
<li>用new/delete创建/销毁对象时，也会调用构造/析构函数。</li>
<li>不建议在构造/析构函数中写太多的代码，可以调用成员函数。</li>
<li>除了初始化，不建议让构造函数做太多工作（只能成功不会失败）。</li>
<li>C++11支持使用统一初始化列表。</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CGirl girl = {<span class="string">"西施"</span><span class="number">20</span>};</span><br><span class="line">CGirl girl  {<span class="string">"西施"</span><span class="number">20</span>};</span><br><span class="line">CGirl* girl = <span class="keyword">new</span> CGirl{ <span class="string">"西施"</span><span class="number">20</span> };</span><br></pre></td></tr></tbody></table></figure>
<ol start="12">
<li>如果类的成员也是类，创建对象的时候，先构造成员类；销毁对象的时候，先析构自身，再析构成员类（视频中有误）。</li>
</ol>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;                                  <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">int</span>         m_age;                                     <span class="comment">// 年龄属性。</span></span><br><span class="line">    <span class="type">char</span>      m_memo[<span class="number">301</span>];                        <span class="comment">// 备注。</span></span><br><span class="line">    <span class="built_in">CGirl</span>()                                        <span class="comment">// 没有参数的构造函数。  </span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">initdata</span>();</span><br><span class="line">        cout &lt;&lt; <span class="string">"调用了CGirl()构造函数。\n"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">CGirl</span>(string name)                   <span class="comment">// 一个参数（姓名）的构造函数。</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">initdata</span>();</span><br><span class="line">        cout &lt;&lt; <span class="string">"调用了CGirl(name)构造函数。\n"</span>;</span><br><span class="line">        m_name = name;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">CGirl</span>(<span class="type">int</span> age)                           <span class="comment">// 一个参数（年龄）的构造函数。</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">initdata</span>();</span><br><span class="line">        cout &lt;&lt; <span class="string">"调用了CGirl(age)构造函数。\n"</span>;</span><br><span class="line">        m_age = age;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">CGirl</span>(string name, <span class="type">int</span> age)      <span class="comment">// 两个参数的构造函数。</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">initdata</span>();</span><br><span class="line">        cout &lt;&lt; <span class="string">"调用了CGirl(name,age)构造函数。\n"</span>;</span><br><span class="line">        m_name = name; m_age = age;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">initdata</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        m_name.<span class="built_in">clear</span>(); m_age = <span class="number">0</span>; <span class="built_in">memset</span>(m_memo, <span class="number">0</span>, <span class="built_in">sizeof</span>(m_memo));</span><br><span class="line">    }</span><br><span class="line">    ~<span class="built_in">CGirl</span>()                                     <span class="comment">// 析构函数。  </span></span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; <span class="string">"调用了~CGirl()\n"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span>                               <span class="comment">// 超女自我介绍的方法。</span></span></span><br><span class="line"><span class="function">    </span>{  cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; <span class="string">"，备注："</span> &lt;&lt; m_memo&lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// CGirl girl;                     // 创建超女对象，不设置任何初始值。</span></span><br><span class="line">    <span class="comment">// CGirl girl("西施");        // 创建超女对象，为成员姓名设置初始值。  （隐式调用函数）</span></span><br><span class="line">    <span class="comment">// CGirl girl("西施",8);     // 创建超女对象，为成员姓名和年龄设置初始值。</span></span><br><span class="line">    <span class="comment">// CGirl girl=CGirl();                   // 创建超女对象，不设置任何初始值。</span></span><br><span class="line">    <span class="comment">// CGirl girl=CGirl("西施");        // 创建超女对象，为成员姓名设置初始值。  （显式调用函数）</span></span><br><span class="line">    <span class="comment">// CGirl girl=CGirl("西施",8);     // 创建超女对象，为成员姓名和年龄设置初始值。</span></span><br><span class="line">    <span class="comment">// CGirl girl = 8;                         // 使用赋值语法初始化对象。</span></span><br><span class="line">    <span class="comment">// CGirl *girl=new CGirl;                   // 创建超女对象，不设置任何初始值。</span></span><br><span class="line">    <span class="comment">// CGirl *girl=new CGirl("西施");        // 创建超女对象，为成员姓名设置初始值。</span></span><br><span class="line">    CGirl *girl=<span class="keyword">new</span> <span class="built_in">CGirl</span>(<span class="string">"西施"</span>,<span class="number">8</span>);     <span class="comment">// 创建超女对象，为成员姓名和年龄设置初始值。</span></span><br><span class="line">    </span><br><span class="line">    girl-&gt;<span class="built_in">show</span>();    <span class="comment">// 显示超女的自我介绍。</span></span><br><span class="line">    <span class="keyword">delete</span> girl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="六、拷贝构造函数">六、拷贝构造函数</h2>
<p>用一个已存在的对象创建新的对象，<strong>不会调用（普通）构造函数，而是调用拷贝构造函数</strong>。<br>
如果类中没有定义拷贝构造函数，编译器将提供一个拷贝构造函数，它的功能是把已存在对象的成员变量赋值给新对象的成员变量。<br>
用一个已存在的对象创建新的对象语法：<br>
<code>类名 新对象名(已存在的对象名);</code><br>
<code>类名 新对象名=已存在的对象名;</code><br>
<strong>拷贝构造函数</strong>的语法：<br>
<code>类名(const 类名&amp; 对象名){......}</code><br>
注意：</p>
<ul>
<li>访问权限必须是<code>public</code>。</li>
<li>函数名必须与<code>类名</code>相同。</li>
<li>没有返回值，不写void。</li>
<li>如果类中定义了拷贝构造函数，编译器将不提供默认的拷贝构造函数。</li>
<li>以<strong>值传递</strong>的方式<strong>调用函数</strong>时，如果实参为对象，会调用拷贝构造函数。</li>
<li><strong>函数以值的方式返回对象时，可能会调用拷贝构造函数（VS会调用，Linux不会，g++编译器做了优化）</strong>。</li>
<li>拷贝构造函数可以重载，可以有默认参数。<br>
<code>类名(......,const 类名&amp; 对象名,......){......}</code></li>
<li>如果类中重载了拷贝构造函数却没有定义默认的拷贝构造函数，编译器也会提供<strong>默认的拷贝构造函数</strong>。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;                                  <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">int</span>         m_age;                                     <span class="comment">// 年龄属性。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 没有参数的普通构造函数。  </span></span><br><span class="line">    <span class="built_in">CGirl</span>() { m_name.<span class="built_in">clear</span>(); m_age = <span class="number">0</span>;  cout &lt;&lt; <span class="string">"调用了CGirl()构造函数。\n"</span>; }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 没有重载的拷贝构造函数（默认拷贝构造函数）。  </span></span><br><span class="line">    <span class="built_in">CGirl</span>(<span class="type">const</span> CGirl &amp;gg) { m_name=<span class="string">"漂亮的"</span>+gg.m_name; m_age = gg.m_age<span class="number">-1</span>;  cout &lt;&lt; <span class="string">"调用了CGirl(const CGirl &amp;gg)拷贝构造函数。\n"</span>; }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重载的拷贝构造函数。  </span></span><br><span class="line">    <span class="built_in">CGirl</span>(<span class="type">const</span> CGirl&amp; gg,<span class="type">int</span> ii) { m_name = <span class="string">"漂亮的"</span> + gg.m_name; m_age = gg.m_age - ii;  cout &lt;&lt; <span class="string">"调用了CGirl(const CGirl &amp;gg,int ii)拷贝构造函数。\n"</span>; }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 析构函数。  </span></span><br><span class="line">    ~<span class="built_in">CGirl</span>() { cout &lt;&lt; <span class="string">"调用了~CGirl()\n"</span>; }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 超女自我介绍的方法，显示姓名和年龄。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    CGirl g1;</span><br><span class="line">    g1.m_name = <span class="string">"西施"</span>; g1.m_age = <span class="number">23</span>;</span><br><span class="line">    <span class="function">CGirl <span class="title">g2</span><span class="params">(g1,<span class="number">3</span>)</span></span>;</span><br><span class="line">    g2.<span class="built_in">show</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;                                  <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">int</span>         m_age;                                     <span class="comment">// 年龄属性。</span></span><br><span class="line">    <span class="type">int</span>*       m_ptr;                                       <span class="comment">// 指针成员，计划使用堆内存。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 没有参数的普通构造函数。  </span></span><br><span class="line">    <span class="built_in">CGirl</span>() { m_name.<span class="built_in">clear</span>(); m_age = <span class="number">0</span>;  m_ptr = <span class="literal">nullptr</span>;  cout &lt;&lt; <span class="string">"调用了CGirl()构造函数。\n"</span>; }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 没有重载的拷贝构造函数（默认拷贝构造函数）。  </span></span><br><span class="line">    <span class="built_in">CGirl</span>(<span class="type">const</span> CGirl&amp; gg) </span><br><span class="line">    { </span><br><span class="line">        m_name = gg.m_name; m_age = gg.m_age;  </span><br><span class="line">        m_ptr = <span class="keyword">new</span> <span class="type">int</span>;         <span class="comment">// 分配内存。</span></span><br><span class="line">        <span class="comment">// *m_ptr = *gg.m_ptr;   // 拷贝数据。</span></span><br><span class="line">        <span class="built_in">memcpy</span>(m_ptr, gg.m_ptr, <span class="built_in">sizeof</span>(<span class="type">int</span>));   <span class="comment">// 拷贝数据。</span></span><br><span class="line">        cout &lt;&lt; <span class="string">"调用了CGirl(const CGirl &amp;gg)拷贝构造函数。\n"</span>; </span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 析构函数。  </span></span><br><span class="line">    ~<span class="built_in">CGirl</span>() { <span class="keyword">delete</span> m_ptr; m_ptr = <span class="literal">nullptr</span>; cout &lt;&lt; <span class="string">"调用了~CGirl()\n"</span>;  }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 超女自我介绍的方法，显示姓名和年龄。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; <span class="string">"，m_ptr="</span>&lt;&lt; m_ptr&lt;&lt;<span class="string">"，*m_ptr="</span>&lt;&lt;*m_ptr&lt;&lt;endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    CGirl g1;</span><br><span class="line">    g1.m_name = <span class="string">"西施"</span>; g1.m_age = <span class="number">23</span>; g1.m_ptr = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">3</span>);</span><br><span class="line">    g1.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="function">CGirl <span class="title">g2</span><span class="params">(g1)</span></span>;  *g2.m_ptr = <span class="number">8</span>;</span><br><span class="line">    g1.<span class="built_in">show</span>();</span><br><span class="line">    g2.<span class="built_in">show</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="七、浅拷贝和深拷贝">七、浅拷贝和深拷贝</h2>
<h2 id="八、初始化列表">八、初始化列表</h2>
<p>构造函数的执行可以分成两个阶段：<strong>初始化阶段</strong>和<strong>计算阶段</strong>（初始化阶段先于计算阶段）。</p>
<ul>
<li>初始化阶段：全部的成员都会在初始化阶段初始化。</li>
<li>计算阶段：一般是指用于执行构造函数体内的<strong>赋值</strong>操作。</li>
</ul>
<p>构造函数除了参数列表和函数体之外，还可以有初始化列表。<br>
初始化列表的语法：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">类名(形参列表):成员一(值一), 成员二(值二),..., 成员<span class="built_in">n</span>(值n)</span><br><span class="line">{......}</span><br></pre></td></tr></tbody></table></figure>
<p>注意：</p>
<ol>
<li>如果成员已经在初始化列表中，则不应该在构造函数中再次赋值。</li>
<li>初始化列表的括号中可以是具体的值，<strong>也可以是构造函数的形参名，还可以是表达式</strong>。</li>
<li>==初始化列表与赋值有本质的区别，如果成员是类，使用初始化列表调用的是成员类的拷贝构造函数，而赋值则是先创建成员类的对象（将调用成员类的普通构造函数），然后再赋值。==</li>
<li>如果成员是类，初始化列表<strong>对性能略有提升</strong>。</li>
<li>如果成员是<strong>常量</strong>和<strong>引用</strong>，必须使用初始列表，因为<u>常量和引用只能在定义的时候初始化</u>。</li>
<li>如果成员是没有默认构造函数的类，则必须使用初始化列表。</li>
<li>拷贝构造函数也可以有初始化列表。</li>
<li>类的成员变量可以不出现在初始化列表中。</li>
<li>构造函数的形参先于成员变量初始化。</li>
</ol>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CBoy</span>                <span class="comment">// 男朋友类。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string m_xm;                      <span class="comment">// 男朋友的姓名。</span></span><br><span class="line">    <span class="built_in">CBoy</span>()                                 <span class="comment">// 没有参数的普通构造函数，默认构造函数。  </span></span><br><span class="line">    { m_xm.<span class="built_in">clear</span>();  cout &lt;&lt; <span class="string">"调用了CBoy()构造函数。\n"</span>; }</span><br><span class="line">    <span class="built_in">CBoy</span>(string xm)                 <span class="comment">// 有一个参数的普通构造函数。  </span></span><br><span class="line">    { m_xm = xm;  cout &lt;&lt; <span class="string">"调用了CBoy(string xm)构造函数。\n"</span>; }</span><br><span class="line">    <span class="built_in">CBoy</span>(<span class="type">const</span> CBoy&amp; bb)     <span class="comment">// 默认拷贝构造函数。  </span></span><br><span class="line">    { m_xm = bb.m_xm;  cout &lt;&lt; <span class="string">"调用了CBoy(const CBoy &amp;bb)拷贝构造函数。\n"</span>; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;                     <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span>         m_age;                         <span class="comment">// 年龄属性。</span></span><br><span class="line">    CBoy&amp;     m_boy;                         <span class="comment">// 男朋友的信息。</span></span><br><span class="line">    <span class="comment">//CGirl()                                       // 没有参数的普通构造函数，默认构造函数。  </span></span><br><span class="line">    <span class="comment">//{  </span></span><br><span class="line">    <span class="comment">//    cout &lt;&lt; "调用了CGirl()构造函数。\n"; </span></span><br><span class="line">    <span class="comment">//}</span></span><br><span class="line">    <span class="comment">//CGirl(string name, int age,CBoy &amp;boy)     // 三个参数的普通构造函数。</span></span><br><span class="line">    <span class="comment">//{</span></span><br><span class="line">    <span class="comment">//    m_name = name; m_age = age; m_boy.m_xm = boy.m_xm;</span></span><br><span class="line">    <span class="comment">//    cout &lt;&lt; "调用了CGirl(name,age,boy)构造函数。\n";</span></span><br><span class="line">    <span class="comment">//}</span></span><br><span class="line">    <span class="built_in">CGirl</span>(string name, <span class="type">int</span> age, CBoy&amp; boy) :<span class="built_in">m_name</span>(name), <span class="built_in">m_age</span>(age),<span class="built_in">m_boy</span>(boy)      <span class="comment">// 三个参数的普通构造函数。</span></span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; <span class="string">"调用了CGirl(name,age,boy)构造函数。\n"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 超女自我介绍的方法，显示姓名、年龄、男朋友。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; <span class="string">"，男朋友："</span> &lt;&lt; m_boy.m_xm &lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="function">CBoy <span class="title">boy</span><span class="params">(<span class="string">"子都"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">CGirl <span class="title">g1</span><span class="params">(<span class="string">"冰冰"</span>,<span class="number">18</span>,boy)</span></span>;</span><br><span class="line">    </span><br><span class="line">    g1.<span class="built_in">show</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="九、const修饰成员函数">九、const修饰成员函数</h2>
<p>在类的成员函数后面加<code>const</code>关键字，表示<u><strong>在成员函数中保证不会修改调用对象的成员变量</strong></u>。（编程规范）<br>
<strong>对构造函数和析构函数加<code>const</code>是非法的。</strong><br>
注意：</p>
<ol>
<li><code>mutable</code>可以突破<code>const</code>的限制，被<code>mutable</code>修饰的成员变量，将永远处于可变的状态，在<code>const</code>修饰的函数中，<code>mutable</code>成员也可以被修改。</li>
<li>非<code>const</code>成员函数可以调用<code>const</code>成员函数和非<code>const</code>成员函数。</li>
<li><strong><code>const</code>成员函数不能调用非<code>const</code>成员函数。</strong></li>
<li>非<code>const</code>对象可以调用<code>const</code>修饰的成员函数和非<code>const</code>修饰的成员函数。</li>
<li><strong><code>const</code>对象只能调用<code>const</code>修饰的成员函数，不能调用非<code>cosnt</code>修饰的成员函数。</strong></li>
</ol>
<p>这里出现了令人纠结的三个问题：</p>
<ol>
<li>为什么要保护类的成员变量不被修改？</li>
<li>为什么用const保护了成员变量，还要再定义一个mutable关键字来突破const的封锁线？</li>
<li>到底有没有必要使用const和mutable这两个关键字？</li>
</ol>
<p>保护类的成员变量不在成员函数中被修改，是为了保证模型的逻辑正确，通过用const关键字来避免在函数中错误的修改了类对象的状态。并且在所有使用该成员函数的地方都可以更准确的预测到使用该成员函数的带来的影响。而mutable则是为了能突破const的封锁线，让类的一些次要的或者是辅助性的成员变量随时可以被更改。没有使用const和mutable关键字当然没有错，const和mutable 关键字只是给了建模工具更多的设计约束和设计灵活性，而且程序员也可以把更多的逻辑检查问题交给编译器和建模工具去做，从而减轻程序员的负担。</p>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">mutable</span> string    m_name;                     <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">int</span>         m_age;                         <span class="comment">// 年龄属性。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 两个参数的普通构造函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>(<span class="type">const</span> string &amp;name, <span class="type">int</span> age) </span><br><span class="line">    { m_name = name; m_age = age;  cout &lt;&lt; <span class="string">"调用了CGirl(name,age)构造函数。\n"</span>; }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 超女自我介绍的方法，显示姓名、年龄。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show1</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span>{ </span><br><span class="line">        m_name=<span class="string">"西施show1"</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; endl; </span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show2</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        m_name = <span class="string">"西施show2"</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show3</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        m_name = <span class="string">"西施show3"</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show4</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        m_name = <span class="string">"西施show4"</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，年龄："</span> &lt;&lt; m_age &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="function"><span class="type">const</span> CGirl <span class="title">g1</span><span class="params">(<span class="string">"冰冰"</span>,<span class="number">18</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    g1.<span class="built_in">show1</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="十、this指针">十、this指针</h2>
<ul>
<li>如果类的成员函数中<strong>涉及多个对象</strong>，在这种情况下需要使用<code>this</code>指针。</li>
<li><u><code>this</code>指针存放了对象的地址，它被作为隐藏参数传递给了成员函数，指向<strong>调用成员函数的对象（调用者对象）</strong>。</u></li>
<li>每个成员函数（包括构造函数和析构函数）都有一个this指针，可以用它访问调用者对象的成员。（可以解决成员变量名与函数形参名相同的问题）</li>
</ul>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>-&gt;aa = aa;<span class="comment">//将形参aa赋值给对象的成员aa</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>*this可以表示对象。</li>
<li>如果在成员函数的括号后面使用const，那么将不能通过this指针修改成员变量。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;                    <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">int</span>         m_yz;                          <span class="comment">// 颜值：1-沉鱼落雁；2-漂亮；3-一般；4-歪瓜裂枣。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 两个参数的普通构造函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>(<span class="type">const</span> string &amp;name, <span class="type">int</span> yz)  { m_name = name; m_yz = yz;  }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 超女自我介绍的方法。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> <span class="type">const</span>  </span>{ cout &lt;&lt; <span class="string">"我是："</span> &lt;&lt; m_name &lt;&lt; <span class="string">"，最漂亮的超女。"</span>&lt;&lt; endl; }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 超女颜值pk的方法。</span></span><br><span class="line">    <span class="function"><span class="type">const</span> CGirl&amp; <span class="title">pk</span><span class="params">(<span class="type">const</span> CGirl&amp; g)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">if</span> (g.m_yz &lt; m_yz) <span class="keyword">return</span> g;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// 比较五个超女的颜值，然后由更漂亮的超女作自我介绍。</span></span><br><span class="line">    <span class="function">CGirl <span class="title">g1</span><span class="params">(<span class="string">"西施"</span>,<span class="number">5</span>)</span>, <span class="title">g2</span><span class="params">(<span class="string">"西瓜"</span>,<span class="number">3</span>)</span>, <span class="title">g3</span><span class="params">(<span class="string">"冰冰"</span>, <span class="number">4</span>)</span>, <span class="title">g4</span><span class="params">(<span class="string">"幂幂"</span>, <span class="number">5</span>)</span>, <span class="title">g5</span><span class="params">(<span class="string">"金莲"</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">    <span class="type">const</span> CGirl&amp; g = g1.<span class="built_in">pk</span>(g2).<span class="built_in">pk</span>(g3).<span class="built_in">pk</span>(g4).<span class="built_in">pk</span>(g5);</span><br><span class="line">    g.<span class="built_in">show</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="十一、静态成员">十一、静态成员</h2>
<ul>
<li>类的静态成员包括<strong>静态成员变量</strong>和<strong>静态成员函数</strong>。</li>
<li>用静态成员可以变量实现多个对象之间的数据共享，<strong>比全局变量更安全性</strong>。</li>
<li>用<code>static</code>关键字把类的成员变量声明为静态，表示它在程序中（不仅是对象）是共享的。</li>
<li>静态成员变量不会在创建对象的时候初始化，必须在程序的<strong>全局区</strong>用代码清晰的初始化（用范围解析运算符 ::）。</li>
<li>静态成员使用类名加范围解析运算符 <code>::</code> 就可以访问，不需要创建对象。</li>
<li>如果把类的成员声明为静态的，就可以把它与类的对象独立开来（<strong>静态成员属于类，但不属于对象</strong>）。</li>
<li>静态成员变量在程序中只有一份（<strong>生命周期与程序运行期相同，存放在静态存储区的</strong>），不论是否创建了类的对- 象，也不论创建了多少个类的对象。</li>
<li>在静态成员函数中，只能访问静态成员，不能访问非静态成员。</li>
<li>静态成员函数中<strong>没有this指针</strong>。</li>
<li>在非静态成员函数中，可以访问静态成员。</li>
<li>私有静态成员在类外无法访问。</li>
<li><code>const</code>静态成员变量可以在定义类的时候初始化。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>                 <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> m_age;                        <span class="comment">// 年龄属性。</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string      m_name;                    <span class="comment">// 姓名属性。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 两个参数的普通构造函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>(<span class="type">const</span> string&amp; name, <span class="type">int</span> age) { m_name = name; m_age = age; }</span><br><span class="line">    <span class="comment">// 显示超女的姓名。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span>  </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; endl; }</span><br><span class="line">    <span class="comment">// 显示超女的年龄。</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">showage</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"年龄："</span> &lt;&lt; m_age &lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> CGirl::m_age=<span class="number">8</span>;        <span class="comment">// 初始化类的静态成员变量。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="function">CGirl <span class="title">g1</span><span class="params">(<span class="string">"西施1"</span>, <span class="number">21</span>)</span>, <span class="title">g2</span><span class="params">(<span class="string">"西施2"</span>, <span class="number">22</span>)</span>, <span class="title">g3</span><span class="params">(<span class="string">"西施3"</span>, <span class="number">23</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    g1.<span class="built_in">showname</span>(); g1.<span class="built_in">showage</span>();</span><br><span class="line">    g2.<span class="built_in">showname</span>(); g2.<span class="built_in">showage</span>();</span><br><span class="line">    g3.<span class="built_in">showname</span>(); g3.<span class="built_in">showage</span>();</span><br><span class="line"></span><br><span class="line">    CGirl::<span class="built_in">showage</span>();</span><br><span class="line">    <span class="comment">// cout &lt;&lt; "CGirl::m_age=" &lt;&lt; CGirl::m_age &lt;&lt; endl;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="十二、简单对象模型">十二、简单对象模型</h2>
<p>在C语言中，数据和处理数据的操作（函数）是分开的。也就是说，C语言本身没有支持数据和函数之间的关联性。<br>
C++用类描述抽象数据类型（abstract data type，ADT），<u>在类中定义了数据和函数，把数据和函数关联起来</u>。<br>
对象中维护了多个<strong>指针表</strong>，表中放了成员与地址的对应关系。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>       <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">char</span>    m_name[<span class="number">10</span>];              <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">int</span>      m_age;                   <span class="comment">// 年龄属性。</span></span><br><span class="line">    <span class="comment">// 默认构造函数和析构函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>() { <span class="built_in">memset</span>(m_name, <span class="number">0</span>, <span class="built_in">sizeof</span>(m_name)); m_age = <span class="number">0</span>;  }</span><br><span class="line">    ~<span class="built_in">CGirl</span>() {  }</span><br><span class="line">    <span class="comment">// 显示超女的姓名。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; endl; }</span><br><span class="line">    <span class="comment">// 显示超女的年龄。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showage</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"年龄："</span> &lt;&lt; m_age &lt;&lt; endl; }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>C++类中有两种数据成员：nonstatic、static，三种函数成员：nonstatic、static、virtual。</p>
<ul>
<li>对象内存的大小包括：1）所有<strong>非静态数据成员</strong>的大小；2）由内存对齐而填补的内存大小；3）为了支持virtual成员而产生的额外负担。</li>
<li><strong>静态成员变量属于类，不计算在对象的大小之内</strong>。</li>
<li>成员函数是分开存储的，不论对象是否存在都占用存储空间，<strong>在内存中只有一个副本</strong>，也<strong>不计算在对象大小之内</strong>。</li>
<li>用空指针可以调用没有用到this指针的非静态成员函数。</li>
<li><strong>对象的地址是第一个非静态成员变量的地址</strong>，如果类中没有非静态成员变量，编译器会隐含的增加一个1字节的占位成员。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>       <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">char</span>    m_name[<span class="number">3</span>];              <span class="comment">// 姓名属性。</span></span><br><span class="line">    <span class="type">int</span>       m_bh;                        <span class="comment">// 编号属性。</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span>       m_age;                      <span class="comment">// 年龄属性。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认构造函数和析构函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>() { <span class="built_in">memset</span>(m_name, <span class="number">0</span>, <span class="built_in">sizeof</span>(m_name)); m_age = <span class="number">0</span>;  }</span><br><span class="line">    ~<span class="built_in">CGirl</span>() {  }</span><br><span class="line">    <span class="comment">// 显示超女的姓名。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span> </span>{ <span class="keyword">if</span> (<span class="keyword">this</span> == <span class="literal">nullptr</span>) <span class="keyword">return</span>;  cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_name &lt;&lt; endl; }</span><br><span class="line">    <span class="comment">// 显示超女的年龄。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showage</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"年龄："</span> &lt;&lt; m_age &lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> CGirl::m_age;</span><br><span class="line"><span class="type">int</span> aaa;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>{}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    CGirl g;</span><br><span class="line">    cout &lt;&lt; <span class="string">"对象g占用的内存大小是："</span> &lt;&lt; <span class="built_in">sizeof</span>(g) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"对象g的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;g &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"成员变量m_bh的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;g.m_bh &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"成员变量m_name的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;g.m_name &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"成员变量m_age的地址是："</span> &lt;&lt; (<span class="type">void</span> *)&amp;g.m_age &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"全局变量aaa的地址是："</span> &lt;&lt; (<span class="type">void</span>*)&amp;aaa &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"成员函数showname的地址是：%p\n"</span>, &amp;CGirl::showname);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"成员函数showage的地址是：%p\n"</span>, &amp;CGirl::showage);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"函数func()的地址是：%p\n"</span>, func);</span><br><span class="line"></span><br><span class="line">    CGirl* g1 = <span class="literal">nullptr</span>;</span><br><span class="line">    g1-&gt;<span class="built_in">showname</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="十三、友元">十三、友元</h2>
<p>如果要访问类的私有成员变量，调用类的公有成员函数是唯一的办法，而类的私有成员函数则无法访问。<br>
友元提供了另一访问类的私有成员的方案。友元有三种：</p>
<ul>
<li>友元全局函数。</li>
<li>友元类。</li>
<li>友元成员函数。</li>
</ul>
<ol>
<li>友元全局函数<br>
在<strong>友元全局函数</strong>中，可以访问另一个类的所有成员。</li>
<li>友元类<br>
在<strong>友元类所有成员函数</strong>中，都可以访问另一个类的所有成员。<br>
友元类的注意事项：
<ul>
<li>友元关系<strong>不能被继承</strong>。</li>
<li>友元关系是<strong>单向</strong>的，不具备交换性。</li>
</ul>
</li>
<li>友元成员函数<br>
在<strong>友元成员函数</strong>中，可以访问另一个类的所有成员。<br>
如果要把男朋友类CBoy的某成员函数声明为超女类CGirl的友元，声明和定义的顺序如下：</li>
</ol>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>;            <span class="comment">// 前置声明。   </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CBoy</span> { ...... };      <span class="comment">// CBoy的定义。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span> </span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">CBoy::func</span><span class="params">(CGirls &amp;g)</span></span>;</span><br><span class="line">     ...... </span><br><span class="line">};      <span class="comment">// CGirl的定义。</span></span><br><span class="line">                                      </span><br><span class="line"><span class="comment">// 友元成员函数的定义。               </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CBoy::func</span><span class="params">(CGirl &amp;g)</span> </span>{ ...... }       </span><br></pre></td></tr></tbody></table></figure>
<p>例如：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>       <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;   <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="comment">// 默认构造函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>() { m_name = <span class="string">"西施"</span>;  m_xw = <span class="number">87</span>; }</span><br><span class="line">    <span class="comment">// 显示姓名的成员函数。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; endl; }</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span>         m_xw;        <span class="comment">// 胸围。</span></span><br><span class="line">    <span class="comment">// 显示胸围的成员函数。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showxw</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"胸围："</span> &lt;&lt; m_xw &lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    CGirl g;</span><br><span class="line">    g.<span class="built_in">showname</span>();</span><br><span class="line">    g.<span class="built_in">showxw</span>();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">func</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>       <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">CBoy</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;   <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="comment">// 默认构造函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>() { m_name = <span class="string">"西施"</span>;  m_xw = <span class="number">87</span>; }</span><br><span class="line">    <span class="comment">// 显示姓名的成员函数。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; endl; }</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span>         m_xw;        <span class="comment">// 胸围。</span></span><br><span class="line">    <span class="comment">// 显示胸围的成员函数。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showxw</span><span class="params">()</span> <span class="type">const</span> </span>{ cout &lt;&lt; <span class="string">"胸围："</span> &lt;&lt; m_xw &lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CBoy</span>    <span class="comment">// 超女的男朋友类</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">const</span> CGirl&amp; g)</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        cout &lt;&lt; <span class="string">"我女朋友的姓名是："</span> &lt;&lt; g.m_name &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">"我女朋友的胸围是："</span> &lt;&lt; g.m_xw &lt;&lt; endl;</span><br><span class="line">        g.<span class="built_in">showxw</span>();</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    CGirl g;</span><br><span class="line">    CBoy b;</span><br><span class="line">    b.<span class="built_in">func</span>(g);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>;      <span class="comment">// 把超女类的声明前置</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CBoy</span>    <span class="comment">// 超女的男朋友类</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">const</span> CGirl&amp; g)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">const</span> CGirl&amp; g)</span></span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CGirl</span>       <span class="comment">// 超女类CGirl。</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">CBoy::func1</span><span class="params">(<span class="type">const</span> CGirl&amp; g)</span></span>;</span><br><span class="line">    <span class="comment">// friend void CBoy::func2(const CGirl&amp; g);</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string    m_name;   <span class="comment">// 姓名。</span></span><br><span class="line">    <span class="comment">// 默认构造函数。</span></span><br><span class="line">    <span class="built_in">CGirl</span>() { m_name = <span class="string">"西施"</span>;  m_xw = <span class="number">87</span>; }</span><br><span class="line">    <span class="comment">// 显示姓名的成员函数。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span> </span>{ cout &lt;&lt; <span class="string">"姓名："</span> &lt;&lt; m_name &lt;&lt; endl; }</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span>         m_xw;        <span class="comment">// 胸围。</span></span><br><span class="line">    <span class="comment">// 显示胸围的成员函数。</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showxw</span><span class="params">()</span> <span class="type">const</span> </span>{ cout &lt;&lt; <span class="string">"胸围："</span> &lt;&lt; m_xw &lt;&lt; endl; }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CBoy::func1</span><span class="params">(<span class="type">const</span> CGirl&amp; g)</span> </span>{ cout &lt;&lt; <span class="string">"func1()我女朋友的胸围是："</span> &lt;&lt; g.m_xw &lt;&lt; endl; }</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CBoy::func2</span><span class="params">(<span class="type">const</span> CGirl&amp; g)</span> </span>{ cout &lt;&lt; <span class="string">"func2()我女朋友的姓名是："</span> &lt;&lt; g.m_name &lt;&lt; endl; }</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    CGirl g;</span><br><span class="line">    CBoy b;</span><br><span class="line">    b.<span class="built_in">func2</span>(g);</span><br><span class="line">    b.<span class="built_in">func1</span>(g);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
    </section>

    
        <section class="post-tag">
            <a href="/tags"><i class="fa fa-tags"></i></a>
            
                <a href="/tags/IT%EF%BC%8C-%E5%AD%A6%E4%B9%A0%EF%BC%8C-C/" class="tag-item">
                    IT， 学习， C++
                </a>
            
        </section>
    
    
        <section class="post-cate">
            <a href="/categories"><i class="fa fa-inbox"></i></a>
            
                <a href="/categories/IT%E6%8A%80%E6%9C%AF/" class="cate-item">
                    IT技术
                </a>
            
        </section>
    

    <section class="post-cc">
        <div class="post-cc-author">
            <span class="bold">作者：</span><a href="mailto:22232025@zju.edu.cn" title="锐哥">锐哥</a>
        </div>
        <div class="post-cc-link">
            <span class="bold">链接：</span><a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8812%EF%BC%89%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/">http://needrigor.github.io/2024/01/08/C-学习笔记（12）类与对象/</a>
        </div>
        <div class="post-cc-source">
            <span class="bold">来源：</span><a href="/">锐哥的个人空间</a>
        </div>
        <div class="ppost-cc-declare">
            <span class="bold">版权声明: </span>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a> 许可协议。著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。 
        </div>
    </section>

    <section class="flex-between" style="margin: 20px 0;">
        <div class="pre">
            
                <a href="/2024/01/09/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8813%EF%BC%89%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/" class="change-link">
                    <span class="icon"><i class="fa fa-angle-double-left"></i></span>
                    <span class="text">
                        <span class="identify">上一篇</span>
                        <span class="text-title">C++学习笔记（13）运算符重载</span>
                    </span>
                </a>
            
        </div>
        <div class="next">
            
                <a href="/2024/01/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8828%EF%BC%89Linux%E5%9F%BA%E7%A1%80/" class="change-link">
                    <span class="text">
                        <span class="identify" style="text-align: right;">下一篇</span>
                        <span class="text-title" style="text-align: right;">C++学习笔记（28）Linux基础</span>
                    </span>
                    <span class="icon"><i class="fa fa-angle-double-right"></i></span>
                </a>
            
        </div>
    </section>

    <!-- comment -->
    <section class="comment-container">
        <!-- giscus -->
        
    </section>
</article>




            <section class="article-bottom flex-between">
                <div class="flex-center">
                    <img src="/imgs/logo.png" class="logo">
                    <span>保持好奇</span>
                </div>
                <div class="flex-center">
                    <a href="mailto:22232025@zju.edu.cn">
                        <span title="envelope">
                            <i class="fa fa-envelope" aria-hidden="true"></i>
                        </span>
                    </a>
                    <a target="_blank" rel="noopener" href="https://github.com/can-dy-jack/hexo-theme-delicate">
                        <span title="github" style="font-size: 18px;">
                            <i class="fa fa-github" aria-hidden="true"></i>
                        </span>
                    </a>
                </div>
            </section>
        </div>
    </main>

    <div class="to-top">
    <a href="javascript: void(0)" onclick="delicate.toTop()">
        <i class="fa fa-chevron-up" aria-hidden="true"></i>
    </a>
</div>

    <footer>
        <div class="footer-info gray">
    <div>
        <span><a target="_blank" rel="noopener" href="https://github.com/can-dy-jack/hexo-theme-delicate">Delicate</a> theme designed with ❤️ by <a target="_blank" rel="noopener" href="https://github.com/can-dy-jack">can-dy-jack</a></span>
    </div>
    <div>
        <span>Copyright Ⓒ 2024. All rights reserved.</span>
    </div>
</div>
    </footer>

    


<script src="/js/index.js"></script>


</body>

</html>