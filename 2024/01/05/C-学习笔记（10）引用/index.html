<!DOCTYPE html>

<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>锐哥的个人空间 | C++学习笔记（10）引用</title>

    
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="锐哥">

    <meta name="color-scheme" content="light dark">

    
    
<link rel="stylesheet" href="/styles/index.css">

    
    <link rel="shortcut icon" href="/imgs/logo.png">

    
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.8.0/styles/base16/solarized-light.css">
    

    
<meta name="generator" content="Hexo 7.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body id="delicate-app">
    <main>
        <div class="container">
            <section class="page-top-badge flex-between w100">
                <div>
                    <a href="/">
                        <span title="github"><i class="fa fa-home" aria-hidden="true"></i></span>
                    </a>
                </div>
                <!-- <div>
                    
                </div> -->
            </section>
            <aside class="toc-container">
    <!-- sticky toc -->
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%95%E7%94%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">一、引用的基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%BC%95%E7%94%A8%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">2.</span> <span class="toc-text">二、引用的本质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%BC%95%E7%94%A8%E7%94%A8%E4%BA%8E%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">三、引用用于函数的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%BC%95%E7%94%A8%E7%9A%84%E5%BD%A2%E5%8F%82%E5%92%8Cconst"><span class="toc-number">4.</span> <span class="toc-text">四、引用的形参和const</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%BC%95%E7%94%A8%E7%94%A8%E4%BA%8E%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">5.</span> <span class="toc-text">五、引用用于函数的返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%90%84%E7%A7%8D%E5%BD%A2%E5%8F%82%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">6.</span> <span class="toc-text">六、各种形参的使用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%87%BD%E6%95%B0%E7%9A%84%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">七、函数的默认参数</span></a></li></ol>
</aside>

<article class="markdown-container">
    <section>
        <h1>
            <span>
                C++学习笔记（10）引用
            </span>
        
            <div class="post-info">
                <span></span>
                <span>
                    33k字 • 
                    66分钟
                </span>
            </div>
        </h1>
    </section>

    <section class="article">
        <h2 id="一、引用的基本概念">一、引用的基本概念</h2>
<p>引用变量是C++新增的<strong>复合类型</strong>。<br>
引用是<strong>已定义的变量的别名</strong>。<br>
引用的主要用途是<u>用作函数的<strong>形参</strong>和<strong>返回值</strong></u>。<br>
声明/创建引用的语法：<code>数据类型 &amp;引用名=原变量名;</code><br>
注意：</p>
<ul>
<li>引用的数据类型要与原变量名的<strong>数据类型相同</strong>。</li>
<li>引用名和原变量名可以互换，它们值和内存单元是相同的。</li>
<li>必须在声明引用的时候初始化，初始化后<strong>不可改变</strong>。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// 声明 / 创建引用的语法：数据类型 &amp; 引用名 = 原变量名;</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>;          <span class="comment">// 声明普通的整型变量。</span></span><br><span class="line">	<span class="type">int</span>&amp; ra = a;      <span class="comment">// 创建引用ra，ra是a的别名。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a  &lt;&lt; <span class="string">"， a的值是："</span> &lt;&lt;  a  &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"，ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	ra = <span class="number">5</span>;    </span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a &lt;&lt; <span class="string">"， a的值是："</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"，ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="二、引用的本质">二、引用的本质</h2>
<p>引用是<strong>指针常量</strong>的伪装。<br>
引用是编译器提供的一个<strong>有用且安全</strong>的工具，去除了指针的一些缺点，禁止了部分不安全的操作。</p>
<p>变量是什么？变量就是一个<strong>在程序执行过程中可以改变的量</strong>。<br>
换一个角度，变量是一块内存区域的名字，它代表了这块内存区域，当我们对变量进行修改的时候，会引起内存区域中内容的改变。<br>
在计算机看来，内存区域根本就不存在什么名字，它仅有的标志就是它的地址，因此我们若想修改一块内存区域的内容，只有知道他的地址才能实现。<br>
所谓的变量只不过是编译器给我们进行的一种抽象，让我们不必去了解更多的细节，降低我们的思维跨度而已。<br>
程序员拥有引用，但编译器仅拥有指针（地址）。<br>
引用的底层机制实际上是和指针一样的。不要相信有别名，不要认为引用可以节省一个指针的空间，因为这一切不会发生，编译器还是会把引用解释为指针。<br>
==引用和指针本质上没有区别。==</p>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// 声明 / 创建引用的语法：数据类型 &amp; 引用名 = 原变量名;</span></span><br><span class="line">	<span class="comment">// 语法：数据类型 * const 变量名;</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>;                         <span class="comment">// 声明普通的整型变量。</span></span><br><span class="line">	<span class="type">int</span>&amp; ra = a;                    <span class="comment">// 创建引用ra，ra是a的别名。               把int&amp;替换成int* const   把a替换成&amp;a</span></span><br><span class="line">	<span class="type">int</span>* <span class="type">const</span> rb = &amp;a;        <span class="comment">// 声明指针常量rb，让它指向变量a。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a  &lt;&lt; <span class="string">"，  a的值是："</span> &lt;&lt;  a  &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"， ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;     <span class="comment">// 把&amp;ra替换成ra，把ra替换成*ra</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"rb的值是  ："</span> &lt;&lt; rb &lt;&lt; <span class="string">"，*rb的值是："</span> &lt;&lt; *rb &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	ra = <span class="number">5</span>;    </span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a &lt;&lt; <span class="string">"，  a的值是："</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"， ra的值是："</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">"rb的值是  ："</span> &lt;&lt; rb &lt;&lt; <span class="string">"，*rb的值是："</span> &lt;&lt; *rb &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="三、引用用于函数的参数">三、引用用于函数的参数</h2>
<p>把函数的形参声明为引用，调用函数的时候，形参将成为实参的别名。<br>
这种方法也叫按<strong>引用传递</strong>或<strong>传引用</strong>。（传值、传地址、传引用只是说法不同，其实都是传值。）<br>
引用的本质是指针，传递的是变量的地址，在函数中，<u>修改形参会影响实参</u>。</p>
<ol>
<li>传引用的代码更简洁。</li>
<li>传引用不必使用二级指针。</li>
<li>引用的属性和特别之处。</li>
</ol>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> no, string str)</span>    <span class="comment">// 传值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	no = <span class="number">8</span>; </span><br><span class="line">	str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span>* no, string* str)</span>    <span class="comment">// 传地址。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	*no = <span class="number">8</span>;</span><br><span class="line">	*str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; *no &lt;&lt; <span class="string">"号："</span> &lt;&lt; *str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(<span class="type">int</span> &amp;no, string &amp;str)</span>    <span class="comment">// 传引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	no = <span class="number">8</span>;</span><br><span class="line">	str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> bh = <span class="number">3</span>;      <span class="comment">// 超女的编号。</span></span><br><span class="line">	string message = <span class="string">"我是一只傻傻鸟。"</span>;          <span class="comment">// 向超女表白的内容。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//func1(bh, message);                  // 传值。</span></span><br><span class="line">	<span class="comment">//func2(&amp;bh, &amp;message);            // 传地址。</span></span><br><span class="line">	<span class="built_in">func3</span>(bh, message);                  <span class="comment">// 传引用。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; bh &lt;&lt; <span class="string">"号："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st_girl</span>      <span class="comment">// 定义超女结构体。</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">int</span> no;            <span class="comment">// 超女编号。</span></span><br><span class="line">	string str;      <span class="comment">// 表白内容。</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(st_girl girl)</span>    <span class="comment">// 传值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	girl.no = <span class="number">8</span>;</span><br><span class="line">	girl.str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl.no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl.str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(st_girl *girl)</span>    <span class="comment">// 传地址。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	girl-&gt;no = <span class="number">8</span>;</span><br><span class="line">	girl-&gt;str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl-&gt;no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl-&gt;str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(st_girl &amp; girl)</span>    <span class="comment">// 传引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	girl.no = <span class="number">8</span>;</span><br><span class="line">	girl.str = <span class="string">"我有一只小小鸟。"</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl.no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl.str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	st_girl girl = { <span class="number">3</span>,<span class="string">"我是一只傻傻鸟。"</span> };</span><br><span class="line"></span><br><span class="line">	<span class="built_in">func1</span>(girl);                  <span class="comment">// 传值。</span></span><br><span class="line">	<span class="comment">//func2(&amp;girl);            // 传地址。</span></span><br><span class="line">	<span class="comment">//func3(girl);                  // 传引用。</span></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; girl.no &lt;&lt; <span class="string">"号："</span> &lt;&lt; girl.str &lt;&lt; endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span>** p)</span>      <span class="comment">// 传地址，实参是指针的地址，形参是二级指针。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	*p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">3</span>);       <span class="comment">// p是二级指针，存放指针的地址。</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"func1内存的地址是："</span> &lt;&lt; *p &lt;&lt; <span class="string">"，内存中的值是："</span> &lt;&lt; **p &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span>*&amp; p)</span>     <span class="comment">// 传引用，实参是指针，形参是指针的别名。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">3</span>);         <span class="comment">// p是指针的别名。</span></span><br><span class="line">	cout &lt;&lt; <span class="string">"func2内存的地址是："</span> &lt;&lt; p &lt;&lt; <span class="string">"，内存中的值是："</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span>* p = <span class="literal">nullptr</span>;    <span class="comment">// 存放在子函数中动态分配内存的地址。</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">func1</span>(&amp;p);      <span class="comment">// 传地址，实参填指针p的地址。</span></span><br><span class="line">	<span class="comment">//func2(p);      // 传引用，实参填指针p。</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">"main 内存的地址是："</span> &lt;&lt; p &lt;&lt; <span class="string">"，内存中的值是："</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> p;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="四、引用的形参和const">四、引用的形参和const</h2>
<p>如果引用的数据对象类型不匹配，当引用为const时，C++将创建<strong>临时变量</strong>，让引用指向临时变量。<br>
什么时候将创建临时变量呢？</p>
<ul>
<li>引用是const。</li>
<li>数据对象的类型是正确的，但不是左值。</li>
<li>数据对象的类型不正确，但可以转换为正确的类型。</li>
</ul>
<p>结论：如果函数的实参不是左值或与const引用形参的类型不匹配，那么C++将创建正确类型的匿名变量，将实参的值传递给匿名变量，并让形参来引用该变量。</p>
<p>将引用形参声明为const的理由有三个：</p>
<ul>
<li>使用const可以避免无意中修改数据的编程错误。</li>
<li>使用const使函数能够处理const和非const实参，否则将只能接受非const实参。</li>
<li>使用const，函数能正确生成并使用临时变量。</li>
</ul>
<p>左值是可以被引用的数据对象，可以通过地址访问它们，例如：变量、数组元素、结构体成员、引用和解引用的指针。<br>
非左值包括字面常量（用双引号包含的字符串除外）和包含多项的表达式。</p>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> no, string str)</span>    <span class="comment">// 传值。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">const</span> <span class="type">int</span>* no,<span class="type">const</span> string* str)</span>    <span class="comment">// 传地址。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; *no &lt;&lt; <span class="string">"号："</span> &lt;&lt; *str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; no, <span class="type">const</span> string&amp; str)</span>    <span class="comment">// 传引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span> &lt;&lt; no &lt;&lt; <span class="string">"号："</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">//int bh = 3;      // 超女的编号。</span></span><br><span class="line">	<span class="comment">//string message = "我是一只傻傻鸟。";          // 向超女表白的内容。</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="built_in">func1</span>(<span class="number">8</span>, <span class="string">"我是一只小小鸟。"</span>);</span><br><span class="line">	<span class="comment">// func2(8, "我是一只小小鸟。");</span></span><br><span class="line">	<span class="built_in">func3</span>(<span class="string">'X'</span>, <span class="string">"我是一只小小鸟。"</span>);</span><br><span class="line">	<span class="comment">////func1(bh, message);                  // 传值。</span></span><br><span class="line">	<span class="comment">////func2(&amp;bh, &amp;message);            // 传地址。</span></span><br><span class="line">	<span class="comment">////func3(bh, message);                  // 传引用。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//cout &lt;&lt; "亲爱的" &lt;&lt; bh &lt;&lt; "号：" &lt;&lt; message &lt;&lt; endl;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="五、引用用于函数的返回值">五、引用用于函数的返回值</h2>
<p>传统的函数返回机制与值传递类似。<br>
函数的返回值被拷贝到一个临时位置（寄存器或栈），然后调用者程序再使用这个值。</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> m=<span class="built_in">sqrt</span>(<span class="number">36</span>);      <span class="comment">// sqrt()是求平方根函数。</span></span><br></pre></td></tr></tbody></table></figure>
<p>sqrt(36)的返回值6被拷贝到临时的位置，然后赋值给m。</p>
<p>如果返回的是一个结构体，将把整个结构体拷贝到临时的位置。</p>
<p>==如果返回引用不会拷贝内存。==<br>
语法：<br>
<code>返回值的数据类型&amp; 函数名(形参列表);</code><br>
注意：</p>
<ul>
<li>如果返回局部变量的引用，其本质是野指针，后果不可预知。</li>
<li>可以返回函数的引用形参、类的成员、全局变量、静态变量。</li>
<li>返回引用的函数是被引用的变量的别名，将const用于引用的返回类型。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span> &amp;<span class="title">func2</span><span class="params">(<span class="type">int</span> &amp;ra)</span>    <span class="comment">// 返回的是引用。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	ra++;</span><br><span class="line">	cout &lt;&lt; <span class="string">"ra的地址是："</span> &lt;&lt; &amp;ra &lt;&lt; <span class="string">"，ra="</span> &lt;&lt; ra &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> ra;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span>&amp; b = <span class="built_in">func2</span>(a);      <span class="comment">// 返回的是引用。</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">" a的地址是："</span> &lt;&lt; &amp;a &lt;&lt; <span class="string">"， a="</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">" b的地址是："</span> &lt;&lt; &amp;b &lt;&lt; <span class="string">"， b="</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// func2(a) = 10;             // 返回引有的函数是被引用的变量的别名。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// cout &lt;&lt; " a的地址是：" &lt;&lt; &amp;a &lt;&lt; "， a=" &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">// cout &lt;&lt; " b的地址是：" &lt;&lt; &amp;b &lt;&lt; "， b=" &lt;&lt; b &lt;&lt; endl;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="六、各种形参的使用场景">六、各种形参的使用场景</h2>
<p>传值、传地址和传引用的指导原则《C++ Primer Plus》</p>
<ol>
<li>如果不需要在函数中修改实参
<ul>
<li>如果实参很小，如C++内置的数据类型或小型结构体，则按值传递。</li>
<li>如果实参是数组，则使用const指针，因为这是唯一的选择（没有为数组建立引用的说法）。</li>
<li>如果实参是较大的结构，则使用const指针或const引用。</li>
<li>如果实参是类，则使用const引用，传递类的标准方式是按引用传递（类设计的语义经常要求使用引用）。</li>
</ul>
</li>
<li>如果需要在函数中修改实参
<ul>
<li>如果实参是内置数据类型，则使用指针。只要看到func(&amp;x)的调用，表示函数将修改x。</li>
<li>如果实参是数组，则只能使用指针。</li>
<li>如果实参是结构体，则使用指针或引用。</li>
<li>如果实参是类，则使用引用。</li>
</ul>
</li>
</ol>
<p>当然，这只是一些指导原则，很可能有充分的理由做出其他的选择。<br>
例如：对于基本类型，cin使用引用，因此可以使用cin&gt;&gt;a，而不是cin&gt;&gt;&amp;a。</p>
<h2 id="七、函数的默认参数">七、函数的默认参数</h2>
<p>默认参数是指调用函数的时候，如果不书写实参，那么将使用的一个缺省值。<br>
语法：<code>返回值 函数名(数据类型 参数=值, 数据类型 参数=值,……);</code><br>
注意：</p>
<ul>
<li>如果函数的声明和定义是分开书写的，在函数声明中书写默认参数，函数的定义中不能书写默认参数。</li>
<li>函数必须从右到左设置默认参数。也就是说，<u>如果要为某个参数设置默认值，则必须为它后面所有的参数设置默认值</u>。</li>
<li><u>调用函数的时候，如果指定了某个参数的值，那么该参数前面所有的参数都必须指定。</u></li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>         <span class="comment">// 包含头文件。</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;        <span class="comment">// 指定缺省的命名空间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> bh,<span class="type">const</span> string &amp;name=<span class="string">"西施"</span>, <span class="type">const</span> string&amp; message=<span class="string">"我喜欢你。"</span>)</span>    <span class="comment">// 向超女表白的函数。</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	cout &lt;&lt; <span class="string">"亲爱的"</span>&lt;&lt;name&lt;&lt;<span class="string">"（"</span>&lt;&lt;bh&lt;&lt;<span class="string">")："</span> &lt;&lt; message &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="built_in">func</span>(<span class="number">3</span>,<span class="string">"冰冰"</span>,<span class="string">"我是一只傻傻鸟。"</span>); </span><br><span class="line">	<span class="built_in">func</span>(<span class="number">5</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
    </section>

    
        <section class="post-tag">
            <a href="/tags"><i class="fa fa-tags"></i></a>
            
                <a href="/tags/IT%EF%BC%8C-%E5%AD%A6%E4%B9%A0%EF%BC%8C-C/" class="tag-item">
                    IT， 学习， C++
                </a>
            
        </section>
    
    
        <section class="post-cate">
            <a href="/categories"><i class="fa fa-inbox"></i></a>
            
                <a href="/categories/IT%E6%8A%80%E6%9C%AF/" class="cate-item">
                    IT技术
                </a>
            
        </section>
    

    <section class="post-cc">
        <div class="post-cc-author">
            <span class="bold">作者：</span><a href="mailto:22232025@zju.edu.cn" title="锐哥">锐哥</a>
        </div>
        <div class="post-cc-link">
            <span class="bold">链接：</span><a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8810%EF%BC%89%E5%BC%95%E7%94%A8/">http://needrigor.github.io/2024/01/05/C-学习笔记（10）引用/</a>
        </div>
        <div class="post-cc-source">
            <span class="bold">来源：</span><a href="/">锐哥的个人空间</a>
        </div>
        <div class="ppost-cc-declare">
            <span class="bold">版权声明: </span>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a> 许可协议。著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。 
        </div>
    </section>

    <section class="flex-between" style="margin: 20px 0;">
        <div class="pre">
            
                <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8811%EF%BC%89%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/" class="change-link">
                    <span class="icon"><i class="fa fa-angle-double-left"></i></span>
                    <span class="text">
                        <span class="identify">上一篇</span>
                        <span class="text-title">C++学习笔记（11）函数重载</span>
                    </span>
                </a>
            
        </div>
        <div class="next">
            
                <a href="/2024/01/05/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%889%EF%BC%89%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E5%85%B1%E5%90%8C%E4%BD%93%E5%92%8C%E6%9E%9A%E4%B8%BE/" class="change-link">
                    <span class="text">
                        <span class="identify" style="text-align: right;">下一篇</span>
                        <span class="text-title" style="text-align: right;">C++学习笔记（9）结构体、共同体和枚举</span>
                    </span>
                    <span class="icon"><i class="fa fa-angle-double-right"></i></span>
                </a>
            
        </div>
    </section>

    <!-- comment -->
    <section class="comment-container">
        <!-- giscus -->
        
    </section>
</article>




            <section class="article-bottom flex-between">
                <div class="flex-center">
                    <img src="/imgs/logo.png" class="logo">
                    <span>保持好奇</span>
                </div>
                <div class="flex-center">
                    <a href="mailto:22232025@zju.edu.cn">
                        <span title="envelope">
                            <i class="fa fa-envelope" aria-hidden="true"></i>
                        </span>
                    </a>
                    <a target="_blank" rel="noopener" href="https://github.com/can-dy-jack/hexo-theme-delicate">
                        <span title="github" style="font-size: 18px;">
                            <i class="fa fa-github" aria-hidden="true"></i>
                        </span>
                    </a>
                </div>
            </section>
        </div>
    </main>

    <div class="to-top">
    <a href="javascript: void(0)" onclick="delicate.toTop()">
        <i class="fa fa-chevron-up" aria-hidden="true"></i>
    </a>
</div>

    <footer>
        <div class="footer-info gray">
    <div>
        <span><a target="_blank" rel="noopener" href="https://github.com/can-dy-jack/hexo-theme-delicate">Delicate</a> theme designed with ❤️ by <a target="_blank" rel="noopener" href="https://github.com/can-dy-jack">can-dy-jack</a></span>
    </div>
    <div>
        <span>Copyright Ⓒ 2024. All rights reserved.</span>
    </div>
</div>
    </footer>

    


<script src="/js/index.js"></script>


</body>

</html>